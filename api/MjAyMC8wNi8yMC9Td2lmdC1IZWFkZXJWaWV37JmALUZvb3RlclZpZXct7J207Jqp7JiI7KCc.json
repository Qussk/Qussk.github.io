{"title":"[Swift]HeaderView와 FooterView 이용예제","date":"2020-06-20T18:17:38.000Z","date_formatted":{"ll":"Jun 20, 2020","L":"06/20/2020","MM-DD":"06-20"},"thumbnail":"/image/header.png","link":"2020/06/20/Swift-HeaderView와-FooterView-이용예제","tags":["CollectionView","FooterView","HeaderView","Swift"],"categories":["ios"],"updated":"2020-09-14T08:28:54.122Z","content":"<p>오늘은 해더뷰와 푸터뷰 이용예제에 대해 알아보자 !</p>\n<p>구현사항</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[ 문제 ]</span><br><span class=\"line\">셀 크기 &#x3D; (80, 80) &#x2F; 아이템과 라인 간격 &#x3D; 4 &#x2F; 인셋 &#x3D; (25, 5, 25, 5)</span><br><span class=\"line\">헤더 높이 50, 푸터 높이 3</span><br></pre></td></tr></table></figure>\n<p>CollectionView와, 레이아웃 잡는 것, CollectionCell 크기 inset값 등은 생략 !</p>\n<p>맨 아래 전체코드로 확인하기 !</p>\n<h1 id=\"headerview적용-(with:collectionview)\">HeaderView적용 (with:CollectionView)<a title=\"#headerview적용-(with:collectionview)\" href=\"#headerview적용-(with:collectionview)\"></a></h1>\n<h2 id=\"1.-sectionheaderview-class만들기\">1. SectionHeaderView class만들기<a title=\"#1.-sectionheaderview-class만들기\" href=\"#1.-sectionheaderview-class만들기\"></a></h2>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> UIKit</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SectionHeaderView</span>: <span class=\"title\">UICollectionReusableView</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">static</span> <span class=\"keyword\">let</span> identifier = <span class=\"string\">\"SectionHeaderView\"</span></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">let</span> titleLabel = <span class=\"type\">UILabel</span>()</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"keyword\">required</span> <span class=\"keyword\">init</span>?(coder aDecoder: <span class=\"type\">NSCoder</span>) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">fatalError</span>(<span class=\"string\">\"init(coder:) has not been implemented\"</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"keyword\">override</span> <span class=\"keyword\">init</span>(frame: <span class=\"type\">CGRect</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>.<span class=\"keyword\">init</span>(frame: frame)</span><br><span class=\"line\">    setupView()</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">setupView</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">    titleLabel.textColor = .darkText</span><br><span class=\"line\">    titleLabel.textAlignment = .<span class=\"keyword\">left</span></span><br><span class=\"line\">    titleLabel.font = <span class=\"type\">UIFont</span>.preferredFont(forTextStyle: .title1)</span><br><span class=\"line\">    addSubview(titleLabel)</span><br><span class=\"line\">    </span><br><span class=\"line\">    titleLabel.translatesAutoresizingMaskIntoConstraints = <span class=\"literal\">false</span></span><br><span class=\"line\">    <span class=\"type\">NSLayoutConstraint</span>.activate([</span><br><span class=\"line\">      titleLabel.centerYAnchor.constraint(equalTo: <span class=\"keyword\">self</span>.centerYAnchor),</span><br><span class=\"line\">      titleLabel.centerXAnchor.constraint(equalTo: <span class=\"keyword\">self</span>.centerXAnchor)</span><br><span class=\"line\">    ])</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"comment\">// MARK: Configure</span></span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">configure</span><span class=\"params\">(title: String)</span></span> &#123;</span><br><span class=\"line\">    titleLabel.text = title</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>1-1. 일단, 헤더뷰든 푸터뷰든 UICollectionReusableView를 만들어야한다. 헤더뷰에 대한 swift파일을 하나 만들어 class만들기.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">class SectionHeaderView: UICollectionReusableView &#123;</span><br></pre></td></tr></table></figure>\n<p>1-2. 헤더뷰의 identifier이름과, 헤더뷰에 들어갈 titleLable을 선언.</p>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">static</span> <span class=\"keyword\">let</span> identifier = <span class=\"string\">\"SectionHeaderView\"</span></span><br><span class=\"line\"> <span class=\"keyword\">private</span> <span class=\"keyword\">let</span> titleLabel = <span class=\"type\">UILabel</span>()</span><br></pre></td></tr></table></figure>\n<p>1-3.  override init 부분은 titleLable의 frame에 대한 함수호출.</p>\n <figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">override</span> <span class=\"keyword\">init</span>(frame: <span class=\"type\">CGRect</span>) &#123;</span><br><span class=\"line\">   <span class=\"keyword\">super</span>.<span class=\"keyword\">init</span>(frame: frame)</span><br><span class=\"line\">   setupView()</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"2.-layout\">2. layout<a title=\"#2.-layout\" href=\"#2.-layout\"></a></h2>\n<p>HeaderView 에 대한 설정은 끝났고, 메인 viewController로 돌아와,<br>\n컬렉션뷰 레이아웃 잡는 위치(레이아웃을 리턴하는 곳. return layout )에 해더뷰의 레이아웃도 함께 지정해준다. 헤더뷰는 어쨌든 컬렉션뷰 위에 놓는 거니까…</p>\n<p>2-1 헤더뷰 레이아웃</p>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">layout.headerReferenceSize = <span class=\"type\">CGSize</span>(width: <span class=\"number\">50</span>, height: <span class=\"number\">50</span>)</span><br></pre></td></tr></table></figure>\n<p>2-2. 스크롤중 해당 해더뷰의 섹션값과 가까워질 때, 헤더뷰가 투명해지는 옵션 !</p>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">layout.sectionHeadersPinToVisibleBounds = <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n<p>2-3. 리턴</p>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">return</span> layout</span><br></pre></td></tr></table></figure>\n<h2 id=\"3.-register-지정\">3. register 지정<a title=\"#3.-register-지정\" href=\"#3.-register-지정\"></a></h2>\n<p>3-1. collectionView의 register를 지정했던 곳 아래에 register을 지정해준다.</p>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">collectionView.register(<span class=\"type\">SectionHeaderView</span>.<span class=\"keyword\">self</span>, forSupplementaryViewOfKind: <span class=\"type\">UICollectionView</span>.elementKindSectionHeader, withReuseIdentifier: <span class=\"type\">SectionHeaderView</span>.identifier)</span><br></pre></td></tr></table></figure>\n<p>3-2. 첫번째, 해더뷰의 이름을 줄러준다. SectionHeaderView.self(1-2부분 참고.) 두번째, UICollectionView.elementKindSectionHeader, (UICollectionView에 elementKindSectionHeader을 둔다는 뜻. 아래 5-1부분 참고.) 세번째, withReuseIdentifier: SectionHeaderView.identifier. identifier 이름 넣기.</p>\n<h2 id=\"4.-numberofsections-지정.\">4. numberOfSections 지정.<a title=\"#4.-numberofsections-지정.\" href=\"#4.-numberofsections-지정.\"></a></h2>\n<p>4-1. 알다시피, 우리는 collectionView 위에 헤더뷰를 놓는 거니까, UICollectionViewDataSource 부분에 numberOfSections(섹션 갯수)함수를 불러 지정.<br>\n(collectionView의 numberOfItemsInSection과 다르다 !!!😡 )</p>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// MARK: - UICollectionViewDataSource</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">extension</span> <span class=\"title\">SupplementaryViewController</span>: <span class=\"title\">UICollectionViewDataSource</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">numberOfSections</span><span class=\"params\">(<span class=\"keyword\">in</span> collectionView: UICollectionView)</span></span> -&gt; <span class=\"type\">Int</span> &#123;</span><br><span class=\"line\">    sections.<span class=\"built_in\">count</span></span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n<p>4-2.  sections.count는 아래의 데이터 부분을 참고하자.</p>\n<p><img src=\"/image/header3.png\" alt=\"\" class=\"φcx\"></p>\n<p>대충 이해가 가죠??</p>\n<h2 id=\"5.-header을-리턴..\">5. header을 리턴…<a title=\"#5.-header을-리턴..\" href=\"#5.-header을-리턴..\"></a></h2>\n<p><strong>집중!</strong></p>\n<p>5-1. UICollectionReusableView를 리턴하는 함수가 있다!</p>\n<p><strong>viewForSupplementaryElementOfKind</strong></p>\n<p>헤더뷰와 푸터뷰를 리턴할 때 모두 사용.</p>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">collectionView</span><span class=\"params\">(<span class=\"number\">_</span> collectionView: UICollectionView, viewForSupplementaryElementOfKind kind: String, at indexPath: IndexPath)</span></span> -&gt; <span class=\"type\">UICollectionReusableView</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> header = collectionView.dequeueReusableSupplementaryView(ofKind: kind, withReuseIdentifier: <span class=\"string\">\"SectionHeaderView\"</span>, <span class=\"keyword\">for</span>: indexPath) <span class=\"keyword\">as</span>! <span class=\"type\">SectionHeaderView</span></span><br><span class=\"line\">  </span><br><span class=\"line\">  header.configure(title: <span class=\"string\">\"sections:\\(indexPath.section + 1)\"</span>)</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"keyword\">return</span> header</span><br></pre></td></tr></table></figure>\n<p>5-2. cellforrowitem에서 하는 것처럼 비슷하게 타입캐스팅 해주면 된다. ofKind는 kind 넣어주고, withReuseIdentifier는 해더뷰의 Identifier이름.<br>\n5-3.  header.configure(title: “sections:(indexPath.section + 1)”)은 indexPath.section만 할경우 섹션 0 부터 시작하므로, 1부터 시작하기 위해 +1해줬다.</p>\n<p>그러면. ? 해더뷰에 대한 <strong>할일</strong>은 모두 했으니 빌드해보자.,</p>\n<p><img src=\"/image/header1.png\" alt=\"\"> 짠…</p>\n<p>아래로 내리면…?</p>\n<p><img src=\"/image/header2.png\" alt=\"\" class=\"φcx\"></p>\n<p>2-2 에서 적용했던 layout.sectionHeadersPinToVisibleBounds = true 으로 투명해지는 모습까지 확인할 수 있다. 🤤</p>\n<p>해더 뷰를 끝냈으니, 빨간색 점선의 FooterView도 적용해 보자!</p>\n<h1 id=\"footerview적용-(with:collectionview)\">FooterView적용 (with:CollectionView)<a title=\"#footerview적용-(with:collectionview)\" href=\"#footerview적용-(with:collectionview)\"></a></h1>\n<p>사실, 과정은 headerview와 거의 동일하다 ㅋㅋ</p>\n<p>위를 참고하며 보기 !</p>\n<h2 id=\"class-sectionfooterview\">Class SectionFooterView<a title=\"#class-sectionfooterview\" href=\"#class-sectionfooterview\"></a></h2>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> UIKit</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SectionFoorterView</span>: <span class=\"title\">UICollectionReusableView</span> </span>&#123;</span><br><span class=\"line\"> </span><br><span class=\"line\">  <span class=\"keyword\">static</span> <span class=\"keyword\">let</span> identifire = <span class=\"string\">\"SectionFoorterView\"</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> foorterLable = <span class=\"type\">UILabel</span>()</span><br><span class=\"line\">  </span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"keyword\">required</span> <span class=\"keyword\">init</span>?(coder aDecoder: <span class=\"type\">NSCoder</span>) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">fatalError</span>(<span class=\"string\">\"init(coder:) has not been implemented\"</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"keyword\">override</span> <span class=\"keyword\">init</span>(frame: <span class=\"type\">CGRect</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>.<span class=\"keyword\">init</span>(frame: frame)</span><br><span class=\"line\">   setupView()</span><br><span class=\"line\"> </span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">setupView</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    foorterLable.backgroundColor = .systemGray</span><br><span class=\"line\">    foorterLable.textColor = .black</span><br><span class=\"line\">    foorterLable.textAlignment = .<span class=\"keyword\">right</span></span><br><span class=\"line\">   <span class=\"comment\">// foorterLable.font = UIFont.boldSystemFont(ofSize: 17)</span></span><br><span class=\"line\">    addSubview(foorterLable)</span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">    foorterLable.translatesAutoresizingMaskIntoConstraints = <span class=\"literal\">false</span></span><br><span class=\"line\">    foorterLable.topAnchor.constraint(equalTo: <span class=\"keyword\">self</span>.topAnchor).isActive = <span class=\"literal\">true</span></span><br><span class=\"line\">    foorterLable.leadingAnchor.constraint(equalTo: <span class=\"keyword\">self</span>.leadingAnchor).isActive = <span class=\"literal\">true</span></span><br><span class=\"line\">    foorterLable.bottomAnchor.constraint(equalTo: <span class=\"keyword\">self</span>.bottomAnchor).isActive = <span class=\"literal\">true</span></span><br><span class=\"line\">    foorterLable.trailingAnchor.constraint(equalTo: <span class=\"keyword\">self</span>.trailingAnchor).isActive = <span class=\"literal\">true</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">configure</span><span class=\"params\">(title: String)</span></span> &#123;</span><br><span class=\"line\">    foorterLable.text = title</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","prev":{"title":"[Swift]MapKit 이해하기","link":"2020/06/23/Swift-MapKit-이해하기"},"next":{"title":"[Swift]Slider 이용예제(with: CollectionView)","link":"2020/06/18/Swift-Slider-이용예제"},"plink":"https://Qussk.github.io/2020/06/20/Swift-HeaderView와-FooterView-이용예제/","toc":[{"id":"headerview적용-(with:collectionview)","title":"HeaderView적용 (with:CollectionView)","index":"1","children":[{"id":"1.-sectionheaderview-class만들기","title":"1. SectionHeaderView class만들기","index":"1.1"},{"id":"2.-layout","title":"2. layout","index":"1.2"},{"id":"3.-register-지정","title":"3. register 지정","index":"1.3"},{"id":"4.-numberofsections-지정.","title":"4. numberOfSections 지정.","index":"1.4"},{"id":"5.-header을-리턴..","title":"5. header을 리턴…","index":"1.5"}]},{"id":"footerview적용-(with:collectionview)","title":"FooterView적용 (with:CollectionView)","index":"2","children":[{"id":"class-sectionfooterview","title":"Class SectionFooterView","index":"2.1"}]}]}