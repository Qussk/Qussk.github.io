{"title":"[Swift]MapKit 이해하기-4(with: MKOverlayRenderer)","date":"2020-06-23T15:36:44.000Z","date_formatted":{"ll":"Jun 23, 2020","L":"06/23/2020","MM-DD":"06-23"},"link":"2020/06/23/Swift-MapKit-이해하기-4","tags":["MapKit","Swift"],"categories":["ios"],"updated":"2020-06-23T06:54:25.797Z","content":"<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> MapKit</span><br></pre></td></tr></table></figure>\n<p>맵킷 가져오기</p>\n<h2 id=\"1.-'원'그림으로-반경-추가하기.(mkcircle)\">1. '원’그림으로 반경 추가하기.(MKCircle)<a title=\"#1.-'원'그림으로-반경-추가하기.(mkcircle)\" href=\"#1.-'원'그림으로-반경-추가하기.(mkcircle)\"></a></h2>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@IBAction</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">addCircle</span><span class=\"params\">(<span class=\"number\">_</span> sender: <span class=\"keyword\">Any</span>)</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> center = mapView.centerCoordinate</span><br><span class=\"line\">     <span class=\"comment\">// 44000m = 44km</span></span><br><span class=\"line\">     <span class=\"keyword\">let</span> circle = <span class=\"type\">MKCircle</span>(center: center, radius: <span class=\"number\">44000</span>)</span><br><span class=\"line\">     mapView.addOverlay(circle)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>1-1.  원 = center 화면 중앙,  radius: 44000은 44km값.</p>\n<h2 id=\"2.-'별그림'으로-반경-추가하기.(mkpolyline)\">2. '별그림’으로 반경 추가하기.(MKPolyline)<a title=\"#2.-'별그림'으로-반경-추가하기.(mkpolyline)\" href=\"#2.-'별그림'으로-반경-추가하기.(mkpolyline)\"></a></h2>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@IBAction</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">addStar</span><span class=\"params\">(<span class=\"number\">_</span> sender: <span class=\"keyword\">Any</span>)</span></span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">//별 컬러 및 굵기 지정</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> center = mapView.centerCoordinate</span><br><span class=\"line\">     </span><br><span class=\"line\">     <span class=\"keyword\">var</span> point1 = center; point1.latitude += <span class=\"number\">0.4</span></span><br><span class=\"line\">     <span class=\"keyword\">var</span> point2 = center; point2.longitude += <span class=\"number\">0.32</span>;   point2.latitude -= <span class=\"number\">0.30</span></span><br><span class=\"line\">     <span class=\"keyword\">var</span> point3 = center; point3.longitude -= <span class=\"number\">0.45</span>;  point3.latitude += <span class=\"number\">0.15</span></span><br><span class=\"line\">     <span class=\"keyword\">var</span> point4 = center; point4.longitude += <span class=\"number\">0.45</span>;  point4.latitude += <span class=\"number\">0.15</span></span><br><span class=\"line\">     <span class=\"keyword\">var</span> point5 = center; point5.longitude -= <span class=\"number\">0.32</span>;   point5.latitude -= <span class=\"number\">0.30</span></span><br><span class=\"line\">     </span><br><span class=\"line\">     <span class=\"keyword\">let</span> points: [<span class=\"type\">CLLocationCoordinate2D</span>] = [point1, point2, point3, point4, point5, point1] <span class=\"comment\">//2-1.</span></span><br><span class=\"line\">     <span class=\"keyword\">let</span> polyline = <span class=\"type\">MKPolyline</span>(coordinates: points, <span class=\"built_in\">count</span>: points.<span class=\"built_in\">count</span>)<span class=\"comment\">//2-2</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    mapView.addOverlay(polyline)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>2-1. 마지막 배열 왜 point1을 넣었을까?  point1로 돌아와야하기 때문.</p>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> points: [<span class=\"type\">CLLocationCoordinate2D</span>] = [point1, point2, point3, point4, point5, point1]</span><br></pre></td></tr></table></figure>\n<p>2-2. points: 특정 점들의 count: 카운트만큼.</p>\n<h2 id=\"3.-mkmapviewdelegate(mkcircle,polyline)\">3. MKMapViewDelegate(MKCircle,polyline)<a title=\"#3.-mkmapviewdelegate(mkcircle,polyline)\" href=\"#3.-mkmapviewdelegate(mkcircle,polyline)\"></a></h2>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// MARK: - MKMapViewDelegate</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">extension</span> <span class=\"title\">RendererOverlayViewController</span>: <span class=\"title\">MKMapViewDelegate</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">mapView</span><span class=\"params\">(<span class=\"number\">_</span> mapView: MKMapView, rendererFor overlay: MKOverlay)</span></span> -&gt; <span class=\"type\">MKOverlayRenderer</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> <span class=\"keyword\">let</span> circle = overlay <span class=\"keyword\">as</span>? <span class=\"type\">MKCircle</span> &#123; <span class=\"comment\">//MKCircle일때 작성.</span></span><br><span class=\"line\">      <span class=\"keyword\">let</span> renderer = <span class=\"type\">MKCircleRenderer</span>(circle: circle)</span><br><span class=\"line\">      renderer.strokeColor = <span class=\"type\">UIColor</span>.blue</span><br><span class=\"line\">      renderer.lineWidth = <span class=\"number\">2</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> renderer</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> <span class=\"keyword\">let</span> polyline = overlay <span class=\"keyword\">as</span>? <span class=\"type\">MKPolyline</span> &#123; <span class=\"comment\">//아니면, MKPolyline을 반환</span></span><br><span class=\"line\">      <span class=\"keyword\">let</span> renderer = <span class=\"type\">MKPolylineRenderer</span>(polyline: polyline)</span><br><span class=\"line\">      renderer.lineWidth = <span class=\"number\">2</span></span><br><span class=\"line\">      renderer.strokeColor = .red</span><br><span class=\"line\">      <span class=\"keyword\">return</span> renderer</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"type\">MKOverlayRenderer</span>(overlay: overlay)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>3-1. MKCircled일때 작성, MKCircled이 아니면, MKPolyline을 반환.</p>\n<p>추가로, 제스처로 화면을 최대한 작게하면 별이 작아진다 !!!</p>\n","next":{"title":"[Swift]MapKit 이해하기-3","link":"2020/06/23/Swift-MapKit-이해하기-3"},"plink":"https://Qussk.github.io/2020/06/23/Swift-MapKit-이해하기-4/","toc":[{"id":"1.-'원'그림으로-반경-추가하기.(mkcircle)","title":"1. &#39;원’그림으로 반경 추가하기.(MKCircle)","index":"1"},{"id":"2.-'별그림'으로-반경-추가하기.(mkpolyline)","title":"2. &#39;별그림’으로 반경 추가하기.(MKPolyline)","index":"2"},{"id":"3.-mkmapviewdelegate(mkcircle,polyline)","title":"3. MKMapViewDelegate(MKCircle,polyline)","index":"3"}]}