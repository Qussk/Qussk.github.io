{"title":"[Swift]Slider 이용예제","date":"2020-06-18T10:29:55.000Z","date_formatted":{"ll":"Jun 18, 2020","L":"06/18/2020","MM-DD":"06-18"},"thumbnail":"/image/slider.png","link":"2020/06/18/Swift-Slider-이용예제","tags":["CollectionView","Slider","Swift"],"categories":["ios"],"updated":"2020-06-18T02:29:13.096Z","content":"<h2 id=\"1.-slider-만들기\">1. Slider 만들기<a title=\"#1.-slider-만들기\" href=\"#1.-slider-만들기\"></a></h2>\n<p><img src=\"/image/slider5.png\" alt=\"\" class=\"φcx\"></p>\n<p>흔히 이용하는 sliderBar를 만들어보자 !</p>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> UIKit</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BasicCodeViewController</span>: <span class=\"title\">UIViewController</span> </span>&#123;</span><br><span class=\"line\">  </span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"comment\">// MARK: LifeCycle</span></span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">viewDidLoad</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>.viewDidLoad()</span><br><span class=\"line\">    setupSliders()</span><br><span class=\"line\">    setupNavigationItem()</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// MARK: Setup Views</span></span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">setupSliders</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 셀 크기 조절</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> sizeSlider = <span class=\"type\">UISlider</span>()</span><br><span class=\"line\">    sizeSlider.minimumValue = <span class=\"number\">10</span></span><br><span class=\"line\">    sizeSlider.maximumValue = <span class=\"number\">200</span></span><br><span class=\"line\">    sizeSlider.value = <span class=\"number\">50</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// 셀 간격 조절</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> spacingSlider = <span class=\"type\">UISlider</span>()</span><br><span class=\"line\">    spacingSlider.minimumValue = <span class=\"number\">0</span></span><br><span class=\"line\">    spacingSlider.maximumValue = <span class=\"number\">50</span></span><br><span class=\"line\">    spacingSlider.value = <span class=\"number\">10</span></span><br><span class=\"line\">    spacingSlider.tag = <span class=\"number\">1</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// 셀 외부여백 조절 </span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> edgeSlider = <span class=\"type\">UISlider</span>()</span><br><span class=\"line\">    edgeSlider.minimumValue = <span class=\"number\">0</span></span><br><span class=\"line\">    edgeSlider.maximumValue = <span class=\"number\">50</span></span><br><span class=\"line\">    edgeSlider.value = <span class=\"number\">10</span></span><br><span class=\"line\">    edgeSlider.tag = <span class=\"number\">2</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">let</span> sliders = [sizeSlider, spacingSlider, edgeSlider]</span><br><span class=\"line\">    sliders.forEach &#123;</span><br><span class=\"line\">      $<span class=\"number\">0</span>.addTarget(<span class=\"keyword\">self</span>, action: #selector(editLayout), <span class=\"keyword\">for</span>: .valueChanged)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">//스택뷰</span></span><br><span class=\"line\">      <span class=\"keyword\">let</span> stackView = <span class=\"type\">UIStackView</span>(arrangedSubviews: sliders)</span><br><span class=\"line\">      view.addSubview(stackView)</span><br><span class=\"line\">      stackView.axis = .vertical <span class=\"comment\">//가로.세로</span></span><br><span class=\"line\">      stackView.alignment = .fill <span class=\"comment\">//정렬</span></span><br><span class=\"line\">      stackView.spacing = <span class=\"number\">10</span> <span class=\"comment\">//슬라이더간의 간격</span></span><br><span class=\"line\">      </span><br><span class=\"line\">      <span class=\"comment\">//스택뷰 오토레이아웃</span></span><br><span class=\"line\">      stackView.translatesAutoresizingMaskIntoConstraints = <span class=\"literal\">false</span></span><br><span class=\"line\">      <span class=\"type\">NSLayoutConstraint</span>.activate([</span><br><span class=\"line\">        stackView.centerXAnchor.constraint(equalTo: view.centerXAnchor),</span><br><span class=\"line\">        stackView.topAnchor.constraint(equalTo: view.safeAreaLayoutGuide.topAnchor, constant: <span class=\"number\">10</span>),</span><br><span class=\"line\">        stackView.widthAnchor.constraint(equalToConstant: <span class=\"number\">300</span>)</span><br><span class=\"line\">      ])</span><br><span class=\"line\">      controllerStackView = stackView</span><br><span class=\"line\"> </span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<p>1-1.     <code>let sizeSlider = UISlider()</code> 로 Slider를 만들어준다.<br>\n1-2. Slider의 minimumValue 는 최소값, maximumValue 최대값이다.<br>\n1-3. Slider의 현재값(value)을 지정해 놓을 수 있다.<br>\n1-4. 여러개가 필요한 경우 tag로 구분해준다.<br>\n1-5. addTarget을 해준다. 슬라이더에 따라 값 변경이 필요한 경우 .valueChanged를 이용한다. (여러개인 경우 forEach를 활용하여 코드 수를 줄이자!)<br>\n1-6. 아래 스택뷰는, slider의 위치를 stackView로 잡고, stackView의 오토레이아웃까지 잡아준 모습.</p>\n<h2 id=\"2.-slider-value지정\">2. Slider value지정<a title=\"#2.-slider-value지정\" href=\"#2.-slider-value지정\"></a></h2>\n<p>1-5. 의 addTarget시 이용한 editLayout을 보자.<br>\n.valueChanged값을 변경하는 것으로 지정한건데, '무엇을?'을 지정해주지 않았다.</p>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//에디팅 레이아웃</span></span><br><span class=\"line\"><span class=\"meta\">@objc</span> <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">editLayout</span><span class=\"params\">(<span class=\"number\">_</span> sender: UISlider)</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> layout = collectionView.collectionViewLayout <span class=\"keyword\">as</span>! <span class=\"type\">UICollectionViewFlowLayout</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> sender.tag == <span class=\"number\">0</span> &#123; <span class=\"comment\">//셀크기</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> size = <span class=\"type\">CGFloat</span>(sender.value)</span><br><span class=\"line\">    layout.itemSize = <span class=\"type\">CGSize</span>(width: size, height: size)</span><br><span class=\"line\">  &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span> sender.tag == <span class=\"number\">1</span> &#123; <span class=\"comment\">//셀간격</span></span><br><span class=\"line\">    layout.minimumLineSpacing = <span class=\"type\">CGFloat</span>(sender.value) <span class=\"comment\">//value?</span></span><br><span class=\"line\">    layout.minimumInteritemSpacing = <span class=\"type\">CGFloat</span>(sender.value)</span><br><span class=\"line\">  &#125;<span class=\"keyword\">else</span> &#123; <span class=\"comment\">//외부여백</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> v = <span class=\"type\">CGFloat</span>(sender.value)</span><br><span class=\"line\">    <span class=\"keyword\">let</span> inset = <span class=\"type\">UIEdgeInsets</span>(top: v, <span class=\"keyword\">left</span>: v, bottom: v, <span class=\"keyword\">right</span>: v)</span><br><span class=\"line\">    layout.sectionInset = inset</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>2-1. 먼저, Slider값에 따라 CollectionView의 layout값을 바꿔줄 것이기 때문에 layout을 불러온다.</p>\n<figure class=\"highlight plain\"><figcaption><span>layout </span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">2-2. 조건문을 이용하여, 첫번째 Slider의 경우, 두번째 Slider의 경우, 세번째 Slider의 경우, 값변경을 어떻게 줄건지 선언한다. </span><br><span class=\"line\">2-3. tag &#x3D;&#x3D; 0의 경우, 셀 크기를 달리하는 영역이다. </span><br><span class=\"line\">&#96;&#96;&#96;let size &#x3D; CGFloat(sender.value)</span><br></pre></td></tr></table></figure>\n<p>로 선언하고, 이 후  layout의 itemSize가 CGSize(width: size, height: size)<br>\nvalue값에 따라 CGSize가 유동적으로 바뀌도록 한다.<br>\ntag == 1 은 셀의 간격, tag == 2(else로 처리)는 외부 여백을 뜻한다.<br>\n2-4. sectionInset은 섹션 안에 여백을 얼마나 줄 것인가? 에 대한 문제.</p>\n<p>그러면 ?</p>\n<p><img src=\"/image/slider1.png\" alt=\"\" class=\"φcx\"></p>\n<p>여기까지는 나온다.<br>\n그런데 Slider를 조절하려하면 팅긴다.<br>\n그리고 Cell은 어디갔지? 할 수 있는데</p>\n<p>우리, 애초에 Cell을 안만들어 줬자냐, 😅🤪</p>\n<p>Cell 만들러 고고 !</p>\n<h2 id=\"3.-cell-만들고-layout잡기\">3. Cell 만들고 layout잡기<a title=\"#3.-cell-만들고-layout잡기\" href=\"#3.-cell-만들고-layout잡기\"></a></h2>\n<p>셀을 호다닥 만든다.</p>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">extension</span> <span class=\"title\">BasicCodeViewController</span>: <span class=\"title\">UICollectionViewDataSource</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">collectionView</span><span class=\"params\">(<span class=\"number\">_</span> collectionView: UICollectionView, numberOfItemsInSection section: Int)</span></span> -&gt; <span class=\"type\">Int</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> itemCount</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">collectionView</span><span class=\"params\">(<span class=\"number\">_</span> collectionView: UICollectionView, cellForItemAt indexPath: IndexPath)</span></span> -&gt; <span class=\"type\">UICollectionViewCell</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> cell = collectionView.dequeueReusableCell(withReuseIdentifier: <span class=\"string\">\"Cell\"</span>, <span class=\"keyword\">for</span>: indexPath)</span><br><span class=\"line\">    cell.backgroundColor = [.red, .green, .blue, .magenta, .gray, .cyan ].randomElement()</span><br><span class=\"line\">    <span class=\"keyword\">return</span> cell</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>3-1. UICollectionViewDataSource에 numberOfItemsInSection와 cellForItemAt 코드 구성.<br>\n3-2. itemCount = 100 이다.<br>\n3-3. Cell의 backgroundColor는 베열중 랜덤으로 실행 되도록 .randomElement 이용.</p>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">setupCollectionView</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\"><span class=\"keyword\">let</span> layout = <span class=\"type\">UICollectionViewFlowLayout</span>()</span><br><span class=\"line\">  layout.itemSize = <span class=\"type\">CGSize</span>(width: <span class=\"number\">60</span>, height: <span class=\"number\">60</span>)   <span class=\"comment\">// 기본값 (50, 50)</span></span><br><span class=\"line\">  layout.minimumInteritemSpacing = <span class=\"number\">10</span>  <span class=\"comment\">// 기본값 10</span></span><br><span class=\"line\">  layout.minimumLineSpacing = <span class=\"number\">20</span>   <span class=\"comment\">// 기본값 10</span></span><br><span class=\"line\">  layout.sectionInset = <span class=\"type\">UIEdgeInsets</span>(top: <span class=\"number\">5</span>, <span class=\"keyword\">left</span>: <span class=\"number\">5</span>, bottom: <span class=\"number\">5</span>, <span class=\"keyword\">right</span>: <span class=\"number\">5</span>)  <span class=\"comment\">// .zero</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">  collectionView = <span class=\"type\">UICollectionView</span>(frame: view.frame, collectionViewLayout: layout)</span><br><span class=\"line\">  collectionView.backgroundColor = .systemBackground</span><br><span class=\"line\">  collectionView.dataSource = <span class=\"keyword\">self</span></span><br><span class=\"line\">  collectionView.register(<span class=\"type\">UICollectionViewCell</span>.<span class=\"keyword\">self</span>, forCellWithReuseIdentifier: <span class=\"string\">\"Cell\"</span>)</span><br><span class=\"line\">  view.addSubview(collectionView)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//콜렉션뷰 오토레이아웃</span></span><br><span class=\"line\">  collectionView.translatesAutoresizingMaskIntoConstraints.toggle()</span><br><span class=\"line\">  <span class=\"type\">NSLayoutConstraint</span>.activate([</span><br><span class=\"line\">    collectionView.topAnchor.constraint(equalTo: controllerStackView.bottomAnchor, constant: <span class=\"number\">10</span>),</span><br><span class=\"line\">    collectionView.leadingAnchor.constraint(equalTo: view.leadingAnchor),</span><br><span class=\"line\">    collectionView.bottomAnchor.constraint(equalTo: view.bottomAnchor),</span><br><span class=\"line\">    collectionView.trailingAnchor.constraint(equalTo: view.trailingAnchor),</span><br><span class=\"line\">  ])</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>3-4.  CollercionView는 꼭 UICollectionViewFlowLayout을 지정해줘야만 한다.<br>\n3-5.  CollercionView의 프레임은 위에 잡은 FlowLayout을 따르도록 한다. (collectionView = UICollectionView(frame: view.frame, collectionViewLayout: layout)<br>\n3-6. 오토레이아웃도 잡아준다.</p>\n<h2 id=\"\"><a title=\"#\" href=\"#\"></a></h2>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@objc</span> <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">changeCollectionViewDirection</span><span class=\"params\">(<span class=\"number\">_</span> sender: <span class=\"keyword\">Any</span>)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> layout = collectionView.collectionViewLayout <span class=\"keyword\">as</span>! <span class=\"type\">UICollectionViewFlowLayout</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> current = layout.scrollDirection</span><br><span class=\"line\">    layout.scrollDirection = current == .horizontal ? .vertical : .horizontal</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","next":{"title":"[Swift]CollectionView 이해하기","link":"2020/06/16/Swift-CollectionView-이해하기"},"plink":"https://Qussk.github.io/2020/06/18/Swift-Slider-이용예제/","toc":[{"id":"1.-slider-만들기","title":"1. Slider 만들기","index":"1"},{"id":"2.-slider-value지정","title":"2. Slider value지정","index":"2"},{"id":"3.-cell-만들고-layout잡기","title":"3. Cell 만들고 layout잡기","index":"3"},{"id":"","title":"","index":"4"}]}