{"title":"[Swift]MapKit 이해하기-3","date":"2020-06-23T14:58:36.000Z","date_formatted":{"ll":"Jun 23, 2020","L":"06/23/2020","MM-DD":"06-23"},"link":"2020/06/23/Swift-MapKit-이해하기-3","tags":["MapKit","Swift"],"categories":["ios"],"updated":"2020-08-20T01:08:23.376Z","content":"<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> MapKit</span><br></pre></td></tr></table></figure>\n<h2 id=\"1.-cllocationcoordinate2dmake\">1. CLLocationCoordinate2DMake<a title=\"#1.-cllocationcoordinate2dmake\" href=\"#1.-cllocationcoordinate2dmake\"></a></h2>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">viewDidAppear</span><span class=\"params\">(<span class=\"number\">_</span> animated: Bool)</span></span> &#123;</span><br><span class=\"line\">   <span class=\"keyword\">super</span>.viewDidAppear(animated)</span><br><span class=\"line\">   <span class=\"comment\">// 시청 위치</span></span><br><span class=\"line\">      <span class=\"keyword\">let</span> center = <span class=\"type\">CLLocationCoordinate2DMake</span>(<span class=\"number\">37.566308</span>, <span class=\"number\">126.977948</span>)</span><br><span class=\"line\">      setRegion(coordinate: center)</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n<p>1-1. app켜질때 시청위치 기본값으로 가져옴.</p>\n<h2 id=\"2.-위치-핀-사용하여-추가.-(mkpointannotation)\">2. 위치 핀 사용하여 추가. (MKPointAnnotation)<a title=\"#2.-위치-핀-사용하여-추가.-(mkpointannotation)\" href=\"#2.-위치-핀-사용하여-추가.-(mkpointannotation)\"></a></h2>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//내가 원하는 위경도값 가져옴.</span></span><br><span class=\"line\"> <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">setRegion</span><span class=\"params\">(coordinate: CLLocationCoordinate2D)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> span = <span class=\"type\">MKCoordinateSpan</span>(latitudeDelta: <span class=\"number\">0.1</span>, longitudeDelta: <span class=\"number\">0.1</span>)</span><br><span class=\"line\">    <span class=\"keyword\">let</span> region = <span class=\"type\">MKCoordinateRegion</span>(center: coordinate, span: span)</span><br><span class=\"line\">    mapView.setRegion(region, animated: <span class=\"literal\">true</span>)</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n<p>2-1. 내가 원하는 위경도값 가져오기.</p>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//위치추가</span></span><br><span class=\"line\"><span class=\"meta\">@IBAction</span> <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">addAnnotation</span><span class=\"params\">(<span class=\"number\">_</span> sender: <span class=\"keyword\">Any</span>)</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> cityHall = <span class=\"type\">MKPointAnnotation</span>()</span><br><span class=\"line\">     cityHall.title = <span class=\"string\">\"시청\"</span></span><br><span class=\"line\">     cityHall.subtitle = <span class=\"string\">\"서울특별시\"</span></span><br><span class=\"line\">     cityHall.coordinate = <span class=\"type\">CLLocationCoordinate2DMake</span>(<span class=\"number\">37.566308</span>, <span class=\"number\">126.977948</span>)</span><br><span class=\"line\">     mapView.addAnnotation(cityHall)</span><br><span class=\"line\">     </span><br><span class=\"line\">     <span class=\"keyword\">let</span> namsan = <span class=\"type\">MKPointAnnotation</span>()</span><br><span class=\"line\">     namsan.title = <span class=\"string\">\"남산\"</span></span><br><span class=\"line\">     namsan.coordinate = <span class=\"type\">CLLocationCoordinate2DMake</span>(<span class=\"number\">37.551416</span>, <span class=\"number\">126.988194</span>)</span><br><span class=\"line\">     mapView.addAnnotation(namsan)</span><br><span class=\"line\"></span><br><span class=\"line\">     <span class=\"keyword\">let</span> gimpoAirport = <span class=\"type\">MKPointAnnotation</span>()</span><br><span class=\"line\">     gimpoAirport.title = <span class=\"string\">\"김포공항\"</span></span><br><span class=\"line\">     gimpoAirport.coordinate = <span class=\"type\">CLLocationCoordinate2DMake</span>(<span class=\"number\">37.559670</span>, <span class=\"number\">126.794320</span>)</span><br><span class=\"line\">     mapView.addAnnotation(gimpoAirport)</span><br><span class=\"line\">     </span><br><span class=\"line\">     <span class=\"keyword\">let</span> gangnam = <span class=\"type\">MKPointAnnotation</span>()</span><br><span class=\"line\">     gangnam.title = <span class=\"string\">\"강남역\"</span></span><br><span class=\"line\">     gangnam.coordinate = <span class=\"type\">CLLocationCoordinate2DMake</span>(<span class=\"number\">37.498149</span>, <span class=\"number\">127.027623</span>)</span><br><span class=\"line\">     mapView.addAnnotation(gangnam)</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n<p>2-2. “핀추가” 눌렀을 때, 해당 위,경도에 대한 위치에 핀 꽂기</p>\n<p><img src=\"/image/map15.png\" alt=\"\" class=\"φcx\"></p>\n<h2 id=\"3.-랜덤-핀으로-이동\">3. 랜덤 핀으로 이동<a title=\"#3.-랜덤-핀으로-이동\" href=\"#3.-랜덤-핀으로-이동\"></a></h2>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@IBAction</span> <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">moveToRandomPin</span><span class=\"params\">(<span class=\"number\">_</span> sender: <span class=\"keyword\">Any</span>)</span></span> &#123;</span><br><span class=\"line\">   <span class=\"keyword\">guard</span> mapView.annotations.<span class=\"built_in\">count</span> &gt; <span class=\"number\">0</span> <span class=\"keyword\">else</span> &#123; <span class=\"keyword\">return</span> &#125;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> random = <span class=\"type\">Int</span>.random(<span class=\"keyword\">in</span>: <span class=\"number\">0</span>..&lt;mapView.annotations.<span class=\"built_in\">count</span>) <span class=\"comment\">//0 이상이면</span></span><br><span class=\"line\">      <span class=\"keyword\">let</span> annotation = mapView.annotations[random] <span class=\"comment\">//랜덤값 가져오기.</span></span><br><span class=\"line\">      setRegion(coordinate: annotation.coordinate) <span class=\"comment\">//그 위치로 이동하도록</span></span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n<p>3-1. 0개 이상이면, 랜덤으로 핀으로 위치 이동하기</p>\n<h2 id=\"4.-핀-제거하기\">4. 핀 제거하기<a title=\"#4.-핀-제거하기\" href=\"#4.-핀-제거하기\"></a></h2>\n <figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@IBAction</span> <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">removeAnnotation</span><span class=\"params\">(<span class=\"number\">_</span> sender: <span class=\"keyword\">Any</span>)</span></span> &#123;</span><br><span class=\"line\">   mapView.removeAnnotations(mapView.annotations)</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n<p>4-1. removeAnnotations 이용</p>\n<h2 id=\"5.-카메라로-보기\">5. 카메라로 보기<a title=\"#5.-카메라로-보기\" href=\"#5.-카메라로-보기\"></a></h2>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@IBAction</span> <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">setupCamera</span><span class=\"params\">(<span class=\"number\">_</span> sender: <span class=\"keyword\">Any</span>)</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> camera = <span class=\"type\">MKMapCamera</span>()</span><br><span class=\"line\">     <span class=\"keyword\">let</span> coordinate = <span class=\"type\">CLLocationCoordinate2DMake</span>(<span class=\"number\">37.551416</span>, <span class=\"number\">126.988194</span>)</span><br><span class=\"line\">     camera.centerCoordinate = coordinate</span><br><span class=\"line\">     camera.centerCoordinateDistance = <span class=\"number\">200</span>  <span class=\"comment\">// 고도      </span></span><br><span class=\"line\">     camera.pitch = <span class=\"number\">70.0</span>  <span class=\"comment\">// 카메라 각도 (0일 때 수직으로 내려다보는 형태)</span></span><br><span class=\"line\">     camera.heading = <span class=\"number\">0</span>   <span class=\"comment\">// 카메라 방향 </span></span><br><span class=\"line\">     mapView.setCamera(camera, animated: <span class=\"literal\">true</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>5-1. centerCoordinateDistance 고도는 <strong>m단위</strong>임<br>\n5-2. <strong>camera.heading</strong> 카메라 방향 0 ~ 360 (맵을 바라보는 방향)</p>\n<p><img src=\"/image/map16.png\" alt=\"\" class=\"φcx\"></p>\n","prev":{"title":"[Swift]MapKit 이해하기-4(with: MKOverlayRenderer)","link":"2020/06/23/Swift-MapKit-이해하기-4"},"next":{"title":"[Swift]MapKit이해하기-2(with: Geocoding)","link":"2020/06/23/Swift-MapKit이해하기-2-with-Geocoding"},"plink":"https://Qussk.github.io/2020/06/23/Swift-MapKit-이해하기-3/","toc":[{"id":"1.-cllocationcoordinate2dmake","title":"1. CLLocationCoordinate2DMake","index":"1"},{"id":"2.-위치-핀-사용하여-추가.-(mkpointannotation)","title":"2. 위치 핀 사용하여 추가. (MKPointAnnotation)","index":"2"},{"id":"3.-랜덤-핀으로-이동","title":"3. 랜덤 핀으로 이동","index":"3"},{"id":"4.-핀-제거하기","title":"4. 핀 제거하기","index":"4"},{"id":"5.-카메라로-보기","title":"5. 카메라로 보기","index":"5"}]}