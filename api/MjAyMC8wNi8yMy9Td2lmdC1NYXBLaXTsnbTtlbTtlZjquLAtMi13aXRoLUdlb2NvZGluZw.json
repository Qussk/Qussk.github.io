{"title":"[Swift]MapKit이해하기-2(with: Geocoding)","date":"2020-06-23T14:43:19.000Z","date_formatted":{"ll":"Jun 23, 2020","L":"06/23/2020","MM-DD":"06-23"},"link":"2020/06/23/Swift-MapKit이해하기-2-with-Geocoding","tags":["MapKit","Swift"],"categories":["ios"],"updated":"2020-06-23T05:56:32.111Z","content":"<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> MapKit</span><br></pre></td></tr></table></figure>\n<h2 id=\"1.-제스처를-이용-(gesture:-uitapgesturerecognizer)\">1. 제스처를 이용 (gesture: UITapGestureRecognizer)<a title=\"#1.-제스처를-이용-(gesture:-uitapgesturerecognizer)\" href=\"#1.-제스처를-이용-(gesture:-uitapgesturerecognizer)\"></a></h2>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//내가 터치한 위치가 위경도 값의 어디에 해당되는지</span></span><br><span class=\"line\"> <span class=\"meta\">@IBAction</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">recognizeTap</span><span class=\"params\">(gesture: UITapGestureRecognizer)</span></span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">let</span> touchPoint = gesture.location(<span class=\"keyword\">in</span>: gesture.view) <span class=\"comment\">//제스처.터치포인트</span></span><br><span class=\"line\">   <span class=\"keyword\">let</span> coordinate = mapView.convert(touchPoint, toCoordinateFrom: mapView)</span><br><span class=\"line\">   <span class=\"keyword\">let</span> location = <span class=\"type\">CLLocation</span>(latitude: coordinate.latitude, longitude: coordinate.longitude)</span><br><span class=\"line\">   </span><br><span class=\"line\">   <span class=\"comment\">//2.참고 </span></span><br><span class=\"line\">   reverseGeocode(location: location)</span><br></pre></td></tr></table></figure>\n<h2 id=\"2.-eversegeocodelocation(위경도-값에서-주소값-가져오기)\">2. everseGeocodeLocation(위경도 값에서 주소값 가져오기)<a title=\"#2.-eversegeocodelocation(위경도-값에서-주소값-가져오기)\" href=\"#2.-eversegeocodelocation(위경도-값에서-주소값-가져오기)\"></a></h2>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">reverseGeocode</span><span class=\"params\">(location: CLLocation)</span></span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> geocoder = <span class=\"type\">CLGeocoder</span>()</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//reverseGeocodeLocation: 위경도값에서 주소값가져오기.</span></span><br><span class=\"line\">  geocoder.reverseGeocodeLocation(location) &#123; placeMark, error <span class=\"keyword\">in</span></span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">\"\\n---------- [ 위경도 -&gt; 주소 ] ----------\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> error != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"built_in\">print</span>(error!.localizedDescription)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// 국가별 주소체계에 따라 어떤 속성 값을 가질지 다름</span></span><br><span class=\"line\">    <span class=\"keyword\">guard</span> <span class=\"keyword\">let</span> address = placeMark?.first,</span><br><span class=\"line\">      <span class=\"keyword\">let</span> country = address.country, <span class=\"comment\">//대한민국</span></span><br><span class=\"line\">      <span class=\"keyword\">let</span> administrativeArea = address.administrativeArea, <span class=\"comment\">//서울특별시 (시/도)</span></span><br><span class=\"line\">      <span class=\"keyword\">let</span> locality = address.locality, <span class=\"comment\">//서초구, 고령군, 광명시, 용산구 (시/군/구)</span></span><br><span class=\"line\">      <span class=\"keyword\">let</span> name = address.name <span class=\"comment\">//방배동 2902, 신림동 1428-12 (읍/면/동)</span></span><br><span class=\"line\">      <span class=\"keyword\">else</span> &#123; <span class=\"keyword\">return</span> &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">let</span> addr = <span class=\"string\">\"\\(country) \\(administrativeArea) \\(locality) \\(name)\"</span></span><br><span class=\"line\">    <span class=\"built_in\">print</span>(addr)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>2-1. 위경도 -&gt; 주소로 값 가져오기(print)</p>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">geocodeAddressString</span><span class=\"params\">(<span class=\"number\">_</span> addressString: String)</span></span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">print</span>(<span class=\"string\">\"[주소-&gt; 위경도]\"</span>)</span><br><span class=\"line\">  <span class=\"keyword\">let</span> geocoder = <span class=\"type\">CLGeocoder</span>()</span><br><span class=\"line\">  geocoder.geocodeAddressString(addressString) &#123; (placeMark, error) <span class=\"keyword\">in</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> error != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">print</span>(error!.localizedDescription)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">guard</span> <span class=\"keyword\">let</span> place = placeMark?.first <span class=\"keyword\">else</span> &#123; <span class=\"keyword\">return</span> &#125;</span><br><span class=\"line\">  <span class=\"built_in\">print</span>(place.location?.coordinate)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>2-2. 주소 -&gt; 위경도로 값 가져오기(print)</p>\n","next":{"title":"[Swift]MapKit 이해하기","link":"2020/06/23/Swift-MapKit-이해하기"},"plink":"https://Qussk.github.io/2020/06/23/Swift-MapKit이해하기-2-with-Geocoding/","toc":[{"id":"1.-제스처를-이용-(gesture:-uitapgesturerecognizer)","title":"1. 제스처를 이용 (gesture: UITapGestureRecognizer)","index":"1"},{"id":"2.-eversegeocodelocation(위경도-값에서-주소값-가져오기)","title":"2. everseGeocodeLocation(위경도 값에서 주소값 가져오기)","index":"2"}]}