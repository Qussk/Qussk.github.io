{"title":"[Swift]CollectionViewCellì— ì• ë‹ˆë©”ì´ì…˜ ì£¼ê¸°(CAAnimation)","date":"2020-07-08T09:07:48.000Z","date_formatted":{"ll":"Jul 8, 2020","L":"07/08/2020","MM-DD":"07-08"},"thumbnail":"/image/acani.png","link":"2020/07/08/Swift-CollectionViewCellì—-ì• ë‹ˆë©”ì´ì…˜-ì£¼ê¸°","tags":["CAAnimation","Swift","UICollectionView"],"categories":["ios"],"updated":"2020-09-14T08:28:54.118Z","content":"<p>Cellì—ëŠ” ì• ë‹ˆë©”ì´ì…˜ ëª»ì£¼ë‚˜?</p>\n<p>ë¼ëŠ” ìƒê°í•˜ë‚˜ë¡œâ€¦</p>\n<p>CollectionViewCellì— animationì„ ì£¼ëŠ” ë°©ë²•ì„ ì°¾ë‹¤ê°€,</p>\n<p>ë ˆì´ì–´ ìƒíƒœ ê°„ì˜ ì• ë‹ˆë©”ì´ì…˜ ì „í™˜ì„ ì£¼ëŠ” CATransitionì„ ë°œê²¬í–ˆë‹¤!</p>\n<p>ğŸ¥º</p>\n<p>ë°”ë¡œ êµ¬í˜„ ê³ ê³ </p>\n<h3 id=\"animationutility.swift\">AnimationUtility.swift<a title=\"#animationutility.swift\" href=\"#animationutility.swift\"></a></h3>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> UIKit</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AnimationUtility</span>: <span class=\"title\">UIViewController</span>, <span class=\"title\">CAAnimationDelegate</span> </span>&#123;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"keyword\">static</span> <span class=\"keyword\">let</span> kSlideAnimationDuration: <span class=\"type\">CFTimeInterval</span> = <span class=\"number\">0.5</span></span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">viewSlideInFromRight</span><span class=\"params\">(toLeft views: UIView)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> transition: <span class=\"type\">CATransition?</span> = <span class=\"literal\">nil</span></span><br><span class=\"line\">    transition = <span class=\"type\">CATransition</span>.<span class=\"keyword\">init</span>()</span><br><span class=\"line\">    transition?.duration = kSlideAnimationDuration</span><br><span class=\"line\">    transition?.timingFunction = <span class=\"type\">CAMediaTimingFunction</span>(name: <span class=\"type\">CAMediaTimingFunctionName</span>.easeInEaseOut)</span><br><span class=\"line\">    transition?.type = <span class=\"type\">CATransitionType</span>.push</span><br><span class=\"line\">    transition?.subtype = <span class=\"type\">CATransitionSubtype</span>.fromRight</span><br><span class=\"line\">    <span class=\"comment\">//transition?.delegate = (self as! CAAnimationDelegate)</span></span><br><span class=\"line\">    views.layer.add(transition!, forKey: <span class=\"literal\">nil</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">viewSlideInFromLeft</span><span class=\"params\">(toRight views: UIView)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> transition: <span class=\"type\">CATransition?</span> = <span class=\"literal\">nil</span></span><br><span class=\"line\">    transition = <span class=\"type\">CATransition</span>.<span class=\"keyword\">init</span>()</span><br><span class=\"line\">    transition?.duration = kSlideAnimationDuration</span><br><span class=\"line\">    transition?.timingFunction = <span class=\"type\">CAMediaTimingFunction</span>(name: <span class=\"type\">CAMediaTimingFunctionName</span>.easeInEaseOut)</span><br><span class=\"line\">    transition?.type = <span class=\"type\">CATransitionType</span>.push</span><br><span class=\"line\">    transition?.subtype = <span class=\"type\">CATransitionSubtype</span>.fromLeft</span><br><span class=\"line\"> <span class=\"comment\">//   transition?.delegate = (self as! CAAnimationDelegate)</span></span><br><span class=\"line\">    views.layer.add(transition!, forKey: <span class=\"literal\">nil</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">viewSlideInFromTop</span><span class=\"params\">(toBottom views: UIView)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> transition: <span class=\"type\">CATransition?</span> = <span class=\"literal\">nil</span></span><br><span class=\"line\">    transition = <span class=\"type\">CATransition</span>.<span class=\"keyword\">init</span>()</span><br><span class=\"line\">    transition?.duration = kSlideAnimationDuration</span><br><span class=\"line\">    transition?.timingFunction = <span class=\"type\">CAMediaTimingFunction</span>(name: <span class=\"type\">CAMediaTimingFunctionName</span>.easeInEaseOut)</span><br><span class=\"line\">    transition?.type = <span class=\"type\">CATransitionType</span>.push</span><br><span class=\"line\">    transition?.subtype = <span class=\"type\">CATransitionSubtype</span>.fromBottom</span><br><span class=\"line\"><span class=\"comment\">//transition?.delegate = (self as! CAAnimationDelegate)</span></span><br><span class=\"line\">    views.layer.add(transition!, forKey: <span class=\"literal\">nil</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">viewSlideInFromBottom</span><span class=\"params\">(toTop views: UIView)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> transition: <span class=\"type\">CATransition?</span> = <span class=\"literal\">nil</span></span><br><span class=\"line\">    transition = <span class=\"type\">CATransition</span>.<span class=\"keyword\">init</span>()</span><br><span class=\"line\">    transition?.duration = kSlideAnimationDuration</span><br><span class=\"line\">    transition?.timingFunction = <span class=\"type\">CAMediaTimingFunction</span>(name: <span class=\"type\">CAMediaTimingFunctionName</span>.easeInEaseOut)</span><br><span class=\"line\">    transition?.type = <span class=\"type\">CATransitionType</span>.push</span><br><span class=\"line\">    transition?.subtype = <span class=\"type\">CATransitionSubtype</span>.fromTop</span><br><span class=\"line\">  <span class=\"comment\">//  transition?.delegate = (self as! CAAnimationDelegate)</span></span><br><span class=\"line\">    views.layer.add(transition!, forKey: <span class=\"literal\">nil</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>CATransition : ë ˆì´ì–´ ìƒíƒœ ê°„ ì• ë‹ˆë©”ì´ì…˜ ì „í™˜ì„ ì œê³µí•˜ëŠ” ê°ì²´. ê¸°ë³¸ ì „í™˜ì€ í¬ë¡œìŠ¤ í˜ì´ë“œì´ì§€ë§Œ ì‚¬ì „ ì •ì˜ ëœ ì „í™˜ ì„¸íŠ¸ì™€ ë‹¤ë¥¸ íš¨ê³¼ë¥¼ ì§€ì •í•  ìˆ˜ ìˆë‹¤.</li>\n<li>CAMediaTimingFunction : ì• ë‹ˆë©”ì´ì…˜ì˜ ê°„ê²©ì˜ íƒ€ì´ë° ê¸°ëŠ¥. ê³¡ì„ ìœ¼ë¡œ ì •ì˜í•˜ëŠ” í•¨ìˆ˜ì˜ í•œ ì„¸ê·¸ë¨¼íŠ¸ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤. ì´ í•¨ìˆ˜ëŠ” ë²”ìœ„ [0,1]ê³¼ ì¶œë ¥ ì‹œê°„ì— ë§¤í•‘ [0,1].</li>\n<li>easeInEaseOut :  ì• ë‹ˆë©”ì´ì…˜ì´ ëŠë¦¬ê²Œ ì‹œì‘í•˜ê³  ì§€ì† ì‹œê°„ ë™ì•ˆ ê°€ì† ëœ ë‹¤ìŒ ì™„ë£Œí•˜ê¸° ì „ì— ë‹¤ì‹œ ëŠë¦¬ê²Œí•¨ (ì•„ë˜ ê·¸ë¦¼ ì°¸ê³ )</li>\n<li>subtypeì€ ì–´ë””ë¡œë¶€í„°? ì˜¬ì§€ ì„¤ì •í•˜ëŠ” ê²ƒ ê°™ë‹¤. (ì•„ë‹ˆë©´ ê¸°ì¡´ ë ˆì´ì•„ì›ƒ ìœ„ì¹˜?)</li>\n</ul>\n<p><img src=\"/image/easeInEaseOut.png\" alt=\"\" class=\"Ï†cx\"></p>\n<h3 id=\"cellforitematì—-animate-ì½”ë“œì¶”ê°€\">cellForItemAtì— animate ì½”ë“œì¶”ê°€<a title=\"#cellforitematì—-animate-ì½”ë“œì¶”ê°€\" href=\"#cellforitematì—-animate-ì½”ë“œì¶”ê°€\"></a></h3>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// MARK: UICollectionViewDataSource</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">extension</span> <span class=\"title\">MainViewController</span>: <span class=\"title\">UICollectionViewDataSource</span> </span>&#123;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">collectionView</span><span class=\"params\">(<span class=\"number\">_</span> collectionView: UICollectionView, numberOfItemsInSection section: Int)</span></span> -&gt; <span class=\"type\">Int</span> &#123;</span><br><span class=\"line\">    <span class=\"number\">4</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">collectionView</span><span class=\"params\">(<span class=\"number\">_</span> collectionView: UICollectionView, cellForItemAt indexPath: IndexPath)</span></span> -&gt; <span class=\"type\">UICollectionViewCell</span> &#123;</span><br><span class=\"line\">        </span><br><span class=\"line\">    <span class=\"keyword\">let</span> cell = collectionView.dequeueReusableCell(withReuseIdentifier: <span class=\"string\">\"CollectionCell\"</span>, <span class=\"keyword\">for</span>: indexPath) <span class=\"keyword\">as</span>! <span class=\"type\">MainCollectionViewCell</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">if</span> !cell.isAnimated &#123;</span><br><span class=\"line\">      </span><br><span class=\"line\">      <span class=\"type\">UIView</span>.animate(withDuration: <span class=\"number\">0.5</span>, delay: <span class=\"number\">0.5</span> * <span class=\"type\">Double</span>(indexPath.row), usingSpringWithDamping: <span class=\"number\">1</span>, initialSpringVelocity: <span class=\"number\">0.5</span>, options: indexPath.row % <span class=\"number\">2</span> == <span class=\"number\">0</span> ? .transitionFlipFromLeft : .transitionFlipFromRight, animations: &#123;</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">if</span> indexPath.row % <span class=\"number\">2</span> == <span class=\"number\">0</span> &#123;</span><br><span class=\"line\">          <span class=\"type\">AnimationUtility</span>.viewSlideInFromLeft(toRight: cell)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">          <span class=\"type\">AnimationUtility</span>.viewSlideInFromRight(toLeft: cell)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        </span><br><span class=\"line\">      &#125;, completion: &#123; (done) <span class=\"keyword\">in</span></span><br><span class=\"line\">        cell.isAnimated = <span class=\"literal\">true</span></span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    cell.backgroundColor = .clear</span><br><span class=\"line\">    cell.mainImageView.image = <span class=\"type\">UIImage</span>(named: images[indexPath.item])</span><br><span class=\"line\">    cell.mainTitleImage.image = <span class=\"type\">UIImage</span>(named: <span class=\"string\">\"cardShadow\"</span>)</span><br><span class=\"line\">    cell.titlteLable.text = titleData[indexPath.item]</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">return</span> cell</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ì½”ë“œëŠ” stackoverflowë¥¼ ì°¸ê³  í–ˆë‹¤!</p>\n<p>ì˜›ë‚  ì½”ë“œë¼ì„œ ë°”ë€ ê²Œ ì¢€ ìˆì—ˆì§€ë§Œ ë¬¸ì œ ì—†ëŠ” ì •ë„ì˜€ë‹¤!..</p>\n<p><a href=\"https://stackoverflow.com/questions/49387620/animate-collection-view-cells\" target=\"_blank\">ì°¸ê³ ë§í¬ - stackoverflow</a></p>\n<h3 id=\"ì™„ì„±ëœ-ëª¨ìŠµ\">ì™„ì„±ëœ ëª¨ìŠµ<a title=\"#ì™„ì„±ëœ-ëª¨ìŠµ\" href=\"#ì™„ì„±ëœ-ëª¨ìŠµ\"></a></h3>\n<p>4ê°€ì§€ ê²Œì„ì´ ë³´ì´ëŠ” ë©”ì¸í™”ë©´ì— ì ìš©!</p>\n<p><a href=\"https://www.youtube.com/watch?v=f2uHaIQeQYw&amp;lc=UgzvZkYN3GBFMesltn94AaABAg\" target=\"_blank\">[ì˜ìƒë³´ê¸°]</a></p>\n","prev":{"title":"[Swift]Cellì— shadowì£¼ê¸°","link":"2020/07/08/Swift-Cellì—-shadowì£¼ê¸°"},"next":{"title":"[Swift]Gesture ì´í•´í•˜ê¸°","link":"2020/06/25/Swift-Gesture-ì´í•´í•˜ê¸°-2"},"plink":"https://Qussk.github.io/2020/07/08/Swift-CollectionViewCellì—-ì• ë‹ˆë©”ì´ì…˜-ì£¼ê¸°/","toc":[{"id":"animationutility.swift","title":"AnimationUtility.swift","index":"1"},{"id":"cellforitematì—-animate-ì½”ë“œì¶”ê°€","title":"cellForItemAtì— animate ì½”ë“œì¶”ê°€","index":"2"},{"id":"ì™„ì„±ëœ-ëª¨ìŠµ","title":"ì™„ì„±ëœ ëª¨ìŠµ","index":"3"}]}