{"title":"[Swift]Gesture 이해하기","date":"2020-06-25T13:18:24.000Z","date_formatted":{"ll":"Jun 25, 2020","L":"06/25/2020","MM-DD":"06-25"},"link":"2020/06/25/Swift-Gesture-이해하기","tags":["Gesture","Swift"],"categories":["ios"],"updated":"2020-06-25T06:16:28.664Z","content":"<h2 id=\"0.-제스처를-이용할-이미지뷰-준비\">0. 제스처를 이용할 이미지뷰 준비<a title=\"#0.-제스처를-이용할-이미지뷰-준비\" href=\"#0.-제스처를-이용할-이미지뷰-준비\"></a></h2>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  <span class=\"meta\">@IBOutlet</span> <span class=\"keyword\">private</span> <span class=\"keyword\">weak</span> <span class=\"keyword\">var</span> imageView: <span class=\"type\">UIImageView!</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">didSet</span> &#123;</span><br><span class=\"line\">    imageView.layer.cornerRadius = imageView.bounds.width / <span class=\"number\">2</span></span><br><span class=\"line\">    imageView.clipsToBounds = <span class=\"literal\">true</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"1.-gesture-메소드\">1. Gesture 메소드<a title=\"#1.-gesture-메소드\" href=\"#1.-gesture-메소드\"></a></h2>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//터치 시작</span></span><br><span class=\"line\">  <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">touchesBegan</span><span class=\"params\">(<span class=\"number\">_</span> touches: Set&lt;UITouch&gt;, with event: UIEvent?)</span></span> &#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">//터치중</span></span><br><span class=\"line\">  <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">touchesMoved</span><span class=\"params\">(<span class=\"number\">_</span> touches: Set&lt;UITouch&gt;, with event: UIEvent?)</span></span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">//터치종료</span></span><br><span class=\"line\">  <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">touchesEnded</span><span class=\"params\">(<span class=\"number\">_</span> touches: Set&lt;UITouch&gt;, with event: UIEvent?)</span></span> &#123;</span><br><span class=\"line\">    &lt;#code#&gt;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">//터치취소, 시스템 인터렙션, inactive상태, 터치중인 뷰가 제거될 떄</span></span><br><span class=\"line\">  <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">touchesCancelled</span><span class=\"params\">(<span class=\"number\">_</span> touches: Set&lt;UITouch&gt;, with event: UIEvent?)</span></span> &#123;</span><br><span class=\"line\">    &lt;#code#&gt;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"2.-gesture적용해보기\">2. Gesture적용해보기<a title=\"#2.-gesture적용해보기\" href=\"#2.-gesture적용해보기\"></a></h2>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"comment\">//터치 시작</span></span><br><span class=\"line\">  <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">touchesBegan</span><span class=\"params\">(<span class=\"number\">_</span> touches: Set&lt;UITouch&gt;, with event: UIEvent?)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>.touchesBegan(touches, with: event)</span><br><span class=\"line\">    <span class=\"keyword\">guard</span> <span class=\"keyword\">let</span> touch = touches.first <span class=\"keyword\">else</span> &#123; <span class=\"keyword\">return</span> &#125;</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(touch)</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">let</span> touchPoint = touch.location(<span class=\"keyword\">in</span>: touch.view) <span class=\"comment\">//정확하게 어디(터치포인트)를 터치했는지.</span></span><br><span class=\"line\">    <span class=\"built_in\">print</span>(touchPoint)</span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">    imageView.image = <span class=\"type\">UIImage</span>(named: <span class=\"string\">\"cat2\"</span>)</span><br><span class=\"line\">    </span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">//터치중</span></span><br><span class=\"line\">  <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">touchesMoved</span><span class=\"params\">(<span class=\"number\">_</span> touches: Set&lt;UITouch&gt;, with event: UIEvent?)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>.touchesMoved(touches, with: event)</span><br><span class=\"line\">    <span class=\"keyword\">guard</span> <span class=\"keyword\">let</span> touch = touches.first <span class=\"keyword\">else</span> &#123; <span class=\"keyword\">return</span> &#125;</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">\"----touchesMoved----\"</span>)</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">let</span> touchPoint = touch.location(<span class=\"keyword\">in</span>: touch.view) <span class=\"comment\">//정확하게 어디(터치포인트)를 터치했는지.</span></span><br><span class=\"line\">    <span class=\"built_in\">print</span>(touchPoint)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"comment\">//터치종료</span></span><br><span class=\"line\">  <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">touchesEnded</span><span class=\"params\">(<span class=\"number\">_</span> touches: Set&lt;UITouch&gt;, with event: UIEvent?)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>.touchesEnded(touches, with: event)</span><br><span class=\"line\">    <span class=\"keyword\">guard</span> <span class=\"keyword\">let</span> touch = touches.first <span class=\"keyword\">else</span> &#123; <span class=\"keyword\">return</span> &#125;</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">\"----touchesEnded----\"</span>)</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">let</span> touchPoint = touch.location(<span class=\"keyword\">in</span>: touch.view) <span class=\"comment\">//정확하게 어디(터치포인트)를 터치했는지.</span></span><br><span class=\"line\">    <span class=\"built_in\">print</span>(touchPoint)</span><br><span class=\"line\">    </span><br><span class=\"line\">    imageView.image = <span class=\"type\">UIImage</span>(named: <span class=\"string\">\"cat2\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"comment\">//터치취소, 시스템 인터렙션, inactive상태, 터치중인 뷰가 제거될 떄</span></span><br><span class=\"line\">  <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">touchesCancelled</span><span class=\"params\">(<span class=\"number\">_</span> touches: Set&lt;UITouch&gt;, with event: UIEvent?)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>.touchesCancelled(touches, with: event)</span><br><span class=\"line\">    <span class=\"keyword\">guard</span> <span class=\"keyword\">let</span> touch = touches.first <span class=\"keyword\">else</span> &#123; <span class=\"keyword\">return</span> &#125;</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">\"----touchesCancelled---\"</span>)</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">let</span> touchPoint = touch.location(<span class=\"keyword\">in</span>: touch.view) <span class=\"comment\">//정확하게 어디(터치포인트)를 터치했는지.</span></span><br><span class=\"line\">    <span class=\"built_in\">print</span>(touchPoint)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"3.-이미지-반응-구현-(클릭,-움직임에-따라-이미지뷰-이동---touchpoint와-toggle이용)\">3. 이미지 반응 구현 (클릭, 움직임에 따라 이미지뷰 이동 - touchPoint와 toggle이용)<a title=\"#3.-이미지-반응-구현-(클릭,-움직임에-따라-이미지뷰-이동---touchpoint와-toggle이용)\" href=\"#3.-이미지-반응-구현-(클릭,-움직임에-따라-이미지뷰-이동---touchpoint와-toggle이용)\"></a></h2>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> UIKit</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 1. - 클릭시 이미지 변환(제스처 메서드 이용)</span></span><br><span class=\"line\"><span class=\"comment\">// 1.5 - 마우스 움직임을 따라서 이미지뷰가 함께 움직이도록 구현</span></span><br><span class=\"line\"><span class=\"comment\">// 2.- 이미지를 클릭했을 경우에만 마우스 움직임을 따라 이미지뷰가 반응하도록 구현</span></span><br><span class=\"line\"><span class=\"comment\">// 3. 다른 방법?</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TouchViewController</span>: <span class=\"title\">UIViewController</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@IBOutlet</span> <span class=\"keyword\">private</span> <span class=\"keyword\">weak</span> <span class=\"keyword\">var</span> imageView: <span class=\"type\">UIImageView!</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">didSet</span> &#123;</span><br><span class=\"line\">    imageView.layer.cornerRadius = imageView.bounds.width / <span class=\"number\">2</span></span><br><span class=\"line\">    imageView.clipsToBounds = <span class=\"literal\">true</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">  <span class=\"comment\">//2-1. 눌렀는지 안눌렀는지에 대한 정보</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> isHoldingImage = <span class=\"literal\">false</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// MARK:  - Touch</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//터치 시작</span></span><br><span class=\"line\">  <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">touchesBegan</span><span class=\"params\">(<span class=\"number\">_</span> touches: Set&lt;UITouch&gt;, with event: UIEvent?)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>.touchesBegan(touches, with: event)</span><br><span class=\"line\">    <span class=\"keyword\">guard</span> <span class=\"keyword\">let</span> touch = touches.first <span class=\"keyword\">else</span> &#123; <span class=\"keyword\">return</span> &#125;</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(touch)</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">let</span> touchPoint = touch.location(<span class=\"keyword\">in</span>: touch.view) <span class=\"comment\">//정확하게 어디(터치포인트)를 터치했는지.</span></span><br><span class=\"line\">    <span class=\"built_in\">print</span>(touchPoint)</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">//이미지뷰 원점 + 크기를 구하는 방법도 있지만 더 쉽게 제공되는 메서드 있음</span></span><br><span class=\"line\">       <span class=\"comment\">// if imageView.frame.contains(touchPoint)</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">if</span> imageView.frame.<span class=\"built_in\">contains</span>(touchPoint) &#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">      <span class=\"comment\">//1-1. 이미지반응 (클릭시 cat2이미지)</span></span><br><span class=\"line\">      imageView.image = <span class=\"type\">UIImage</span>(named: <span class=\"string\">\"cat2\"</span>)</span><br><span class=\"line\">    </span><br><span class=\"line\">      <span class=\"comment\">//2-2.</span></span><br><span class=\"line\">      isHoldingImage = <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"comment\">//터치중</span></span><br><span class=\"line\">  <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">touchesMoved</span><span class=\"params\">(<span class=\"number\">_</span> touches: Set&lt;UITouch&gt;, with event: UIEvent?)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>.touchesMoved(touches, with: event)</span><br><span class=\"line\">    <span class=\"keyword\">guard</span> isHoldingImage, <span class=\"keyword\">let</span> touch = touches.first <span class=\"keyword\">else</span> &#123; <span class=\"keyword\">return</span> &#125;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> touchPoint = touch.location(<span class=\"keyword\">in</span>: touch.view)</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">if</span> imageView.frame.<span class=\"built_in\">contains</span>(touchPoint) &#123;</span><br><span class=\"line\">   </span><br><span class=\"line\">      <span class=\"comment\">//2-0. 이미지 이동 (이것만하면 뚝뚝 끊김)</span></span><br><span class=\"line\">    imageView.center = touchPoint</span><br><span class=\"line\">      <span class=\"comment\">//2-3. 트루일때만 동작하도록</span></span><br><span class=\"line\">      isHoldingImage = <span class=\"literal\">true</span></span><br><span class=\"line\">      </span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"comment\">//터치종료</span></span><br><span class=\"line\">  <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">touchesEnded</span><span class=\"params\">(<span class=\"number\">_</span> touches: Set&lt;UITouch&gt;, with event: UIEvent?)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>.touchesEnded(touches, with: event)</span><br><span class=\"line\">    <span class=\"keyword\">guard</span> isHoldingImage <span class=\"keyword\">else</span> &#123; <span class=\"keyword\">return</span> &#125;</span><br><span class=\"line\">   </span><br><span class=\"line\">    <span class=\"comment\">//2-4. 끄기 (토클로 꺼도 무관)</span></span><br><span class=\"line\">    isHoldingImage.toggle() <span class=\"comment\">//초기화로 펄스상태 만듦.</span></span><br><span class=\"line\">    <span class=\"comment\">//1-2. 종료시 다시 cat1이미지</span></span><br><span class=\"line\">    imageView.image = <span class=\"type\">UIImage</span>(named: <span class=\"string\">\"cat1\"</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"comment\">//터치취소, 시스템 인터렙션, inactive상태, 터치중인 뷰가 제거될 떄</span></span><br><span class=\"line\">  <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">touchesCancelled</span><span class=\"params\">(<span class=\"number\">_</span> touches: Set&lt;UITouch&gt;, with event: UIEvent?)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>.touchesCancelled(touches, with: event)</span><br><span class=\"line\">       <span class=\"keyword\">guard</span> isHoldingImage <span class=\"keyword\">else</span> &#123; <span class=\"keyword\">return</span> &#125;</span><br><span class=\"line\">       isHoldingImage.toggle() <span class=\"comment\">//2-4.</span></span><br><span class=\"line\">       imageView.image = <span class=\"type\">UIImage</span>(named: <span class=\"string\">\"cat1\"</span>) <span class=\"comment\">//1-2.</span></span><br><span class=\"line\">    </span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>3-1. <strong>touchesBegan(터치시작)</strong> 했을 때, 이미지 변경.</p>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">imageView.image = <span class=\"type\">UIImage</span>(named: <span class=\"string\">\"cat2\"</span>)</span><br></pre></td></tr></table></figure>\n<p>3-2. <strong>touchesBegan(터치시작)</strong> 했을때,</p>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> imageView.frame.<span class=\"built_in\">contains</span>(touchPoint) &#123;</span><br></pre></td></tr></table></figure>\n<p>touchPoint 에 접근했을 때</p>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">isHoldingImage = <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n<p>을 주어 끊김현상 방지.</p>\n<h2 id=\"4.-이미지-반응-구현-(클릭,-움직임에-따라-이미지뷰-이동---lasttouchpoint,-previouslocation이용)\">4. 이미지 반응 구현 (클릭, 움직임에 따라 이미지뷰 이동 - lastTouchPoint, previousLocation이용)<a title=\"#4.-이미지-반응-구현-(클릭,-움직임에-따라-이미지뷰-이동---lasttouchpoint,-previouslocation이용)\" href=\"#4.-이미지-반응-구현-(클릭,-움직임에-따라-이미지뷰-이동---lasttouchpoint,-previouslocation이용)\"></a></h2>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> UIKit</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 1. - 클릭시 이미지 변환(제스처 메서드 이용)</span></span><br><span class=\"line\"><span class=\"comment\">// 1.5 - 마우스 움직임을 따라서 이미지뷰가 함께 움직이도록 구현</span></span><br><span class=\"line\"><span class=\"comment\">// 2.- 이미지를 클릭했을 경우에만 마우스 움직임을 따라 이미지뷰가 반응하도록 구현</span></span><br><span class=\"line\"><span class=\"comment\">// 3. 다른 방법?</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TouchViewController</span>: <span class=\"title\">UIViewController</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@IBOutlet</span> <span class=\"keyword\">private</span> <span class=\"keyword\">weak</span> <span class=\"keyword\">var</span> imageView: <span class=\"type\">UIImageView!</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">didSet</span> &#123;</span><br><span class=\"line\">    imageView.layer.cornerRadius = imageView.bounds.width / <span class=\"number\">2</span></span><br><span class=\"line\">    imageView.clipsToBounds = <span class=\"literal\">true</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">  <span class=\"comment\">//2-1. 눌렀는지 안눌렀는지에 대한 정보</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> isHoldingImage = <span class=\"literal\">false</span></span><br><span class=\"line\">  <span class=\"comment\">//3-1. 라스트 터치포인트 기억시키기</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> lastTouchPoint = <span class=\"type\">CGPoint</span>.zero</span><br><span class=\"line\">  </span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"comment\">// MARK:  - Touch</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//터치 시작</span></span><br><span class=\"line\">  <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">touchesBegan</span><span class=\"params\">(<span class=\"number\">_</span> touches: Set&lt;UITouch&gt;, with event: UIEvent?)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>.touchesBegan(touches, with: event)</span><br><span class=\"line\">    <span class=\"keyword\">guard</span> <span class=\"keyword\">let</span> touch = touches.first <span class=\"keyword\">else</span> &#123; <span class=\"keyword\">return</span> &#125;</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(touch)</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">let</span> touchPoint = touch.location(<span class=\"keyword\">in</span>: touch.view) <span class=\"comment\">//정확하게 어디(터치포인트)를 터치했는지.</span></span><br><span class=\"line\">    <span class=\"built_in\">print</span>(touchPoint)</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">//이미지뷰 원점 + 크기를 구하는 방법도 있지만 더 쉽게 제공되는 메서드 있음</span></span><br><span class=\"line\">       <span class=\"comment\">// if imageView.frame.contains(touchPoint)</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">if</span> imageView.frame.<span class=\"built_in\">contains</span>(touchPoint) &#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">      <span class=\"comment\">//1-1. 이미지반응 (클릭시 cat2이미지)</span></span><br><span class=\"line\">      imageView.image = <span class=\"type\">UIImage</span>(named: <span class=\"string\">\"cat2\"</span>)</span><br><span class=\"line\">    </span><br><span class=\"line\">      <span class=\"comment\">//2-2.</span></span><br><span class=\"line\">      isHoldingImage = <span class=\"literal\">true</span></span><br><span class=\"line\">      </span><br><span class=\"line\">      <span class=\"comment\">//3-2.</span></span><br><span class=\"line\">      lastTouchPoint = touchPoint</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"comment\">//터치중</span></span><br><span class=\"line\">  <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">touchesMoved</span><span class=\"params\">(<span class=\"number\">_</span> touches: Set&lt;UITouch&gt;, with event: UIEvent?)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>.touchesMoved(touches, with: event)</span><br><span class=\"line\">    <span class=\"keyword\">guard</span> isHoldingImage, <span class=\"keyword\">let</span> touch = touches.first <span class=\"keyword\">else</span> &#123; <span class=\"keyword\">return</span> &#125;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> touchPoint = touch.location(<span class=\"keyword\">in</span>: touch.view)</span><br><span class=\"line\">    </span><br><span class=\"line\">      </span><br><span class=\"line\">      <span class=\"comment\">//3-3.</span></span><br><span class=\"line\">      <span class=\"comment\">// currenTouchPoint = 100 (움직인위치)</span></span><br><span class=\"line\">      <span class=\"comment\">// lastTouchPoint = 150 (시작위치)</span></span><br><span class=\"line\">      <span class=\"comment\">// 100 - 150 = -50 (이동거리)</span></span><br><span class=\"line\">      </span><br><span class=\"line\">      </span><br><span class=\"line\">     <span class=\"comment\">//방법1.3-3. lastTouchPoint이용</span></span><br><span class=\"line\">    <span class=\"comment\">//x의 이동거리, y의 이동거리를 센터x랑 센터y에게 더해준 것.</span></span><br><span class=\"line\">    <span class=\"comment\">//    imageView.center.x = imageView.center.x + (touchPoint.x - lastTouchPoint.x)</span></span><br><span class=\"line\">    <span class=\"comment\">//    imageView.center.y = imageView.center.y + (touchPoint.y - lastTouchPoint.y)</span></span><br><span class=\"line\">    <span class=\"comment\">//    lastTouchPoint = touchPoint</span></span><br><span class=\"line\">      <span class=\"comment\">//lastTouchPoint처음위치부터 계산됨.</span></span><br><span class=\"line\">      </span><br><span class=\"line\">     </span><br><span class=\"line\">    <span class=\"comment\">//방법2.3-3.previousLocation이용 (lastTouchPoint와 비슷)</span></span><br><span class=\"line\">      touch.previousLocation: 직전의 터치포인트를 기억했다가 알려주는것.</span><br><span class=\"line\">      <span class=\"keyword\">let</span> prevTouchPoint = touch.previousLocation(<span class=\"keyword\">in</span>: touch.view)</span><br><span class=\"line\">      imageView.center.x = imageView.center.x + (touchPoint.x - prevTouchPoint.x)</span><br><span class=\"line\">      imageView.center.y = imageView.center.y + (touchPoint.y - prevTouchPoint.y)</span><br><span class=\"line\"> </span><br><span class=\"line\">      <span class=\"comment\">//점에서 점으로 이동했을때, 센터x랑,y한테 그 이동거리만큼 움직여라</span></span><br><span class=\"line\">  </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"comment\">//터치종료</span></span><br><span class=\"line\">  <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">touchesEnded</span><span class=\"params\">(<span class=\"number\">_</span> touches: Set&lt;UITouch&gt;, with event: UIEvent?)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>.touchesEnded(touches, with: event)</span><br><span class=\"line\">    <span class=\"keyword\">guard</span> isHoldingImage <span class=\"keyword\">else</span> &#123; <span class=\"keyword\">return</span> &#125;</span><br><span class=\"line\">   </span><br><span class=\"line\">    <span class=\"comment\">//2-4. 끄기 (토클로 꺼도 무관)</span></span><br><span class=\"line\">    isHoldingImage.toggle() <span class=\"comment\">//초기화로 펄스상태 만듦.</span></span><br><span class=\"line\">    <span class=\"comment\">//1-2. 종료시 다시 cat1이미지</span></span><br><span class=\"line\">    imageView.image = <span class=\"type\">UIImage</span>(named: <span class=\"string\">\"cat1\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    </span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"comment\">//터치취소, 시스템 인터렙션, inactive상태, 터치중인 뷰가 제거될 떄</span></span><br><span class=\"line\">  <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">touchesCancelled</span><span class=\"params\">(<span class=\"number\">_</span> touches: Set&lt;UITouch&gt;, with event: UIEvent?)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>.touchesCancelled(touches, with: event)</span><br><span class=\"line\">       <span class=\"keyword\">guard</span> isHoldingImage <span class=\"keyword\">else</span> &#123; <span class=\"keyword\">return</span> &#125;</span><br><span class=\"line\">       isHoldingImage.toggle() <span class=\"comment\">//2-4.</span></span><br><span class=\"line\">       imageView.image = <span class=\"type\">UIImage</span>(named: <span class=\"string\">\"cat1\"</span>) <span class=\"comment\">//1-2.</span></span><br><span class=\"line\">    </span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>4-1. 둘의 차이가 있다면, lastTouchPoint는 개발자가 저장한 값, previousLocation는 프레임워크에서 지원하는 값.<br>\n4-2. 3의 방법보다 lastTouchPoint와 previousLocation를 이용하는게 훨씬 깔끔? 할 것 같다는 개인적인 생각.</p>\n<h2 id=\"5.-shack-모션달기(bonus)\">5. shack 모션달기(Bonus)<a title=\"#5.-shack-모션달기(bonus)\" href=\"#5.-shack-모션달기(bonus)\"></a></h2>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// MARK: Motion</span></span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">motionBegan</span><span class=\"params\">(<span class=\"number\">_</span> motion: UIEvent.EventSubtype, with event: UIEvent?)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>.motionBegan(motion, with: event)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> motion == .motionShake &#123;</span><br><span class=\"line\">      imageView.image = <span class=\"type\">UIImage</span>(named: <span class=\"string\">\"cat2\"</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">motionEnded</span><span class=\"params\">(<span class=\"number\">_</span> motion: UIEvent.EventSubtype, with event: UIEvent?)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>.motionEnded(motion, with: event)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> motion == .motionShake &#123;</span><br><span class=\"line\">      imageView.image = <span class=\"type\">UIImage</span>(named: <span class=\"string\">\"cat1\"</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">motionCancelled</span><span class=\"params\">(<span class=\"number\">_</span> motion: UIEvent.EventSubtype, with event: UIEvent?)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>.motionCancelled(motion, with: event)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> motion == .motionShake &#123;</span><br><span class=\"line\">      imageView.image = <span class=\"type\">UIImage</span>(named: <span class=\"string\">\"cat1\"</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","prev":{"title":"[Swift]Gesture 이해하기 -2(Gesture)","link":"2020/06/25/Swift-Gesture-이해하기-2"},"next":{"title":"[Swift]MapKit 이해하기-4(with: MKOverlayRenderer)","link":"2020/06/23/Swift-MapKit-이해하기-4"},"plink":"https://Qussk.github.io/2020/06/25/Swift-Gesture-이해하기/","toc":[{"id":"0.-제스처를-이용할-이미지뷰-준비","title":"0. 제스처를 이용할 이미지뷰 준비","index":"1"},{"id":"1.-gesture-메소드","title":"1. Gesture 메소드","index":"2"},{"id":"2.-gesture적용해보기","title":"2. Gesture적용해보기","index":"3"},{"id":"3.-이미지-반응-구현-(클릭,-움직임에-따라-이미지뷰-이동---touchpoint와-toggle이용)","title":"3. 이미지 반응 구현 (클릭, 움직임에 따라 이미지뷰 이동 - touchPoint와 toggle이용)","index":"4"},{"id":"4.-이미지-반응-구현-(클릭,-움직임에-따라-이미지뷰-이동---lasttouchpoint,-previouslocation이용)","title":"4. 이미지 반응 구현 (클릭, 움직임에 따라 이미지뷰 이동 - lastTouchPoint, previousLocation이용)","index":"5"},{"id":"5.-shack-모션달기(bonus)","title":"5. shack 모션달기(Bonus)","index":"6"}]}