{"title":"[Swift]customUIView 만들기","date":"2020-07-25T15:18:31.000Z","date_formatted":{"ll":"Jul 25, 2020","L":"07/25/2020","MM-DD":"07-25"},"thumbnail":"/image/xib11.png","link":"2020/07/25/Swift-customUIView-만들기","tags":["CustomUI","UIView"],"categories":["ios"],"updated":"2020-07-25T07:21:15.680Z","content":"<p>저번에 기술면접을 보면서</p>\n<p>커스텀 UI를 써본 적이 있느냐는 질문을 받았다.</p>\n<p>혹시 MVC 패턴 말씀하시는거냐고 물었는데 ㅋㅋㅋ</p>\n<p>정색하면서 아니라고 ㅋㅋㅋ</p>\n<p>흐윽… 😱</p>\n<p>커스텀UI의 존재를 처음 알았다… customUI는 처음부터 개발자가 완전 커스텀으로 만드는 방식… 애플이 권장하는 것 사용하지 않고…</p>\n<p>생각해보니 없는게 이상한…ㅋㅋ</p>\n<p>안일했던걸까… 😔 ;;</p>\n<p>이후 수업에 집중도 안되고 customUI 공부하기 시작…<br>\n(궁금한 건 풀어야함… )</p>\n<p>그러면서 customUI로된 앱이 뭐가 있을까? 찾아봤는데</p>\n<p>아무래봐도 스냅챗이 유력해보였따…</p>\n<p>위에 View가 cornerRadius들어간 걸 보니 확신,…</p>\n<p>비슷하게 구현해보자 !</p>\n<h2 id=\"1.-uiview\">1. UIView<a title=\"#1.-uiview\" href=\"#1.-uiview\"></a></h2>\n<p>먼저, customView가 될, UIView를 하나 만든다.<br>\n시험삼아 레이블 1개,버튼 1개가 있는 커스텀 뷰를 만들 것이다.</p>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> UIKit</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyView</span>: <span class=\"title\">UIView</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> myLable = <span class=\"type\">UILabel</span>()</span><br><span class=\"line\">  <span class=\"keyword\">let</span> mybutton = <span class=\"type\">UIButton</span>()</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">override</span> <span class=\"keyword\">init</span>(frame: <span class=\"type\">CGRect</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>.<span class=\"keyword\">init</span>(frame: frame)</span><br><span class=\"line\">    commonInit()</span><br><span class=\"line\">    setUI()</span><br><span class=\"line\">    constrain()</span><br><span class=\"line\">    </span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"keyword\">required</span> <span class=\"keyword\">init</span>?(coder: <span class=\"type\">NSCoder</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>.<span class=\"keyword\">init</span>(coder: coder)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">commonInit</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">let</span> viewXib = <span class=\"type\">Bundle</span>.main.loadNibNamed(<span class=\"string\">\"MyView\"</span>, owner: <span class=\"keyword\">self</span>, options: <span class=\"literal\">nil</span>)![<span class=\"number\">0</span>] <span class=\"keyword\">as</span>! <span class=\"type\">UIView</span></span><br><span class=\"line\">    viewXib.frame = <span class=\"keyword\">self</span>.bounds</span><br><span class=\"line\">    viewXib.backgroundColor = .white</span><br><span class=\"line\">    viewXib.layer.cornerRadius = <span class=\"number\">20</span></span><br><span class=\"line\">    addSubview(viewXib)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">setUI</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    myLable.text = <span class=\"string\">\"dd\"</span></span><br><span class=\"line\">    addSubview(myLable)</span><br><span class=\"line\">    </span><br><span class=\"line\">    mybutton.setTitle(<span class=\"string\">\"버튼\"</span>, <span class=\"keyword\">for</span>: .normal)</span><br><span class=\"line\">    mybutton.setTitleColor(.red, <span class=\"keyword\">for</span>: .normal)</span><br><span class=\"line\">    addSubview(mybutton)</span><br><span class=\"line\">    </span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">constrain</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    [myLable,mybutton].forEach &#123;</span><br><span class=\"line\">      $<span class=\"number\">0</span>.translatesAutoresizingMaskIntoConstraints = <span class=\"literal\">false</span></span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"type\">NSLayoutConstraint</span>.activate([</span><br><span class=\"line\">      myLable.centerXAnchor.constraint(equalTo: centerXAnchor),</span><br><span class=\"line\">      myLable.centerYAnchor.constraint(equalTo: centerYAnchor),</span><br><span class=\"line\">  </span><br><span class=\"line\">      mybutton.topAnchor.constraint(equalTo: myLable.bottomAnchor),</span><br><span class=\"line\">      mybutton.centerXAnchor.constraint(equalTo: centerXAnchor),</span><br><span class=\"line\"></span><br><span class=\"line\">    ])</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>1-1.  override init과 required init?은 일반 MVC와 동일하다.<br>\n1-2. 습관처럼 view.addsubview~~ 쓰려고 했는데 이미 view라서 view쓰면 오류난다. addsubView으로 그냥으로 처리… 이해하면 당연한건데 몬가 신박… ㅋ<br>\n1-3.  다른점은 commonInit 부분인데,  commonInit함수가 UIview불러오는 함수다.<br>\n1-4. <strong>loadNibNamed</strong> 이 해당 xib파일의 클래스 이름을 가져와준다. Bundle.main으로?.. &quot;MyView&quot;는 xib클래스 이름!</p>\n<p>xib 이 뭐야 !!😡 라고 묻는 다면 아래를 보시라.</p>\n<p><s>늦어서 미안…</s></p>\n<h2 id=\"2.-xib만들기\">2. xib만들기<a title=\"#2.-xib만들기\" href=\"#2.-xib만들기\"></a></h2>\n<p><img src=\"/image/xib.png\" alt=\"\" class=\"φcx\"></p>\n<p>2-1. cmd + n 으로 새로만들기 ㄱㄱ 하면서 아래 View를 선택</p>\n<p><img src=\"/image/xib1.png\" alt=\"\" class=\"φcx\"></p>\n<p>스토리보드 비스무리한 게 나올텐데 우리는 코드쟁이이니까.</p>\n<p>2-2. class이름만 지정하도록 한다.</p>\n<p>(스토리 보드로 할거라면, 위의 코드에 레이블과 버튼을 모두 @IBOulet처리 하면된다. 그리고 스토리 보드에 꾸미면 됨… 이건 다른 블로그에도 많으니까…)</p>\n<p>그런데 파일에 직접 들어가서 class이름을 하나하나 부여하는 것도 번거로운것 같은데… 아마 다른 방법이 있긴 할 것같은데…<br>\n다음에 더 알아보기로…<br>\n(지금은 궁금증해소가 먼저,)</p>\n<p><img src=\"/image/xib3.png\" alt=\"\" class=\"φcx\"></p>\n<p>2-3. 파일명도 customView와 동일하게 지정해줬다면 끝! (혼돈이 오지 않게)</p>\n<p><strong>commonInit</strong> 함수에 viewXib 가 customView가 된다.<br>\nviewXib.backgroundColor = .white 로 지정하여 구분!</p>\n<h2 id=\"3.viewcontroller\">3.ViewController<a title=\"#3.viewcontroller\" href=\"#3.viewcontroller\"></a></h2>\n<p>제작한 customView(MyUIView.swift)를  ViewController에 가져오기.</p>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> UIKit</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ViewController</span>: <span class=\"title\">UIViewController</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">viewDidLoad</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>.viewDidLoad()</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">let</span> customView = <span class=\"type\">MyView</span>(frame: <span class=\"type\">CGRect</span>(x: <span class=\"number\">0</span>, y: <span class=\"number\">0</span>, width: view.frame.width, height: view.frame.height))</span><br><span class=\"line\">    view.backgroundColor = .yellow</span><br><span class=\"line\">    <span class=\"keyword\">self</span>.view.addSubview(customView)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>3-1. customView의 크기는 ViewController에서 한답</p>\n<p>일단 이정도로 해주면 ?</p>\n<p><img src=\"/image/xib4.png\" alt=\"\" class=\"φcx\"></p>\n<p>vc위에 해당 frame 값으로 customView가 위치한 모습을 볼 수 있다.  스냅챗처럼 커스텀뷰인거 티내려고 cornerRadius = 20을 줬던건데…<br>\n생각해보니 일반 view에 cornerRadius가 안먹었었나 !? ㅡㅡ 문득 생각이 들어<br>\nvc에도 cornerRadius을 줘봤다…</p>\n<p>결과는,?</p>\n<p><img src=\"/image/xib5.png\" alt=\"\" class=\"φcx\"></p>\n<p>아,… 원래 되는거구나 그냥 일반 view에서도…</p>\n<p>((((배신감))))… 난 뭘한거지… 🤔</p>\n<p>현재 수치 ㅋ… 구분하기 쉽게…</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">view.laye.cornerRadius &#x3D; 10</span><br><span class=\"line\">viewXib.layer.cornerRadius &#x3D; 20</span><br></pre></td></tr></table></figure>\n<p>아니 그럼 내가 믿었던 건 뭐지 ㅠㅠ…</p>\n<p>근데 스냅챗은 뒤에가 검정색인데 ? …!!</p>\n<p>ㅎㅎ…</p>\n<p>SceneDelegate가서 window 색을 black으로 바꾸어 보았다…</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">window?.backgroundColor &#x3D; .black</span><br></pre></td></tr></table></figure>\n<p>결과는 … ? ? ?</p>\n<p><img src=\"/image/xib6.png\" alt=\"\" class=\"φcx\"></p>\n<p>앗… 뭔가 원했던 그림이랑 비슷하게 나왔다 ㅋㅋ…</p>\n<p>이제야 궁금증이 해소된…</p>\n<p>하…  근데 면접자분 피셜, 현역에서도 customUI를 제대로 다루는 사람을 본적이 없다고 하셨따… (네이버10년 배민 2년경력이신…)</p>\n<p>흠…</p>\n<p>좀 더 연구해보기로…</p>\n<p>일단 더 주어진 생각은</p>\n<p>버튼에 액션도 달기<br>\n그리고 UIView하나 더 만들어서 상호작용도 하는지도 확인해보아야 할 것 같다…</p>\n<p>다음편에서…</p>\n<p>?? ㅎㅎ</p>\n","prev":{"title":"[라이브러리]paper-onboarding","link":"2020/07/30/라이브러리-paper-onboarding"},"next":{"title":"[Swift]PageView(with:ScrollView)","link":"2020/07/20/Swift-PageView-with-ScrollView"},"plink":"https://Qussk.github.io/2020/07/25/Swift-customUIView-만들기/","toc":[{"id":"1.-uiview","title":"1. UIView","index":"1"},{"id":"2.-xib만들기","title":"2. xib만들기","index":"2"},{"id":"3.viewcontroller","title":"3.ViewController","index":"3"}]}