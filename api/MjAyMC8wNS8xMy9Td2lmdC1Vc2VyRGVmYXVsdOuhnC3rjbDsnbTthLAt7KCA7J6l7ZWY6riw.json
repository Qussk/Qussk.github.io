{"title":"[Swift]UserDefault로 데이터 저장하기","date":"2020-05-13T17:31:10.000Z","date_formatted":{"ll":"May 13, 2020","L":"05/13/2020","MM-DD":"05-13"},"thumbnail":"/image/UserDefault-1.png","link":"2020/05/13/Swift-UserDefault로-데이터-저장하기","tags":["ImageView","Swift","TextField","TextFieldDelegate","UserDefault","화면전환"],"categories":["ios"],"updated":"2020-08-20T01:08:23.383Z","content":"<h2 id=\"userdefault-이해하기\">UserDefault 이해하기<a title=\"#userdefault-이해하기\" href=\"#userdefault-이해하기\"></a></h2>\n<p>쉽게 말하면, 앱상의 작은 저장공간이라고 생각하면 된다.<br>\n앱을 종료하여도, 사용자의 데이터가 다시 리셋되지 않도록 기억해주는 장치.</p>\n<p>예제로 쉽게 이해해보도록 하자!</p>\n<h2 id=\"userdefault-활용하기\">UserDefault 활용하기<a title=\"#userdefault-활용하기\" href=\"#userdefault-활용하기\"></a></h2>\n<p><img src=\"/image/UserDefault-1.png\" alt=\"이미지\" class=\"φcx\"></p>\n<h3 id=\"구현-목표\">구현 목표<a title=\"#구현-목표\" href=\"#구현-목표\"></a></h3>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1. 스위치를 On으로 하면 강아지사진, Off는 고양이사진. (Bool을 활용하면된다.)</span><br><span class=\"line\">2. 레이블도 스위치에 따라 함께 변경. &quot;Dog&quot; : &quot;Cat&quot;</span><br><span class=\"line\">3. 텍스트필드는 save버튼 누른 다음의 뷰화면(프로필 화면)에 name으로 변경될 것.</span><br><span class=\"line\">4. 사진(이미지),레이블(Dog&#x2F;Cat),텍스트필드(data) 모두 마찬가지.</span><br><span class=\"line\">5. 변경내용을 모두 제자리로 돌리는 Setup버튼 구현.</span><br></pre></td></tr></table></figure>\n<h2 id=\"1.-ui짜기,-구조설정\">1. UI짜기, 구조설정<a title=\"#1.-ui짜기,-구조설정\" href=\"#1.-ui짜기,-구조설정\"></a></h2>\n<p>1-1. @IBOutlet 및 @IBAction 연결.</p>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@IBOutlet</span> <span class=\"keyword\">var</span> animalPhoto: <span class=\"type\">UIImageView!</span> <span class=\"comment\">//imageSwich</span></span><br><span class=\"line\"><span class=\"meta\">@IBOutlet</span> <span class=\"keyword\">var</span> animalLable: <span class=\"type\">UILabel!</span> <span class=\"comment\">//Dog</span></span><br><span class=\"line\"><span class=\"meta\">@IBOutlet</span> <span class=\"keyword\">var</span> animalSwitch: <span class=\"type\">UISwitch!</span>  <span class=\"comment\">//스위치 아울렛</span></span><br><span class=\"line\"><span class=\"meta\">@IBOutlet</span> <span class=\"keyword\">var</span> animalTextField: <span class=\"type\">UITextField!</span> <span class=\"comment\">//텍스트필드(name) </span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//스위치 액션</span></span><br><span class=\"line\"> <span class=\"meta\">@IBAction</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">isSwitch</span><span class=\"params\">(<span class=\"number\">_</span> sender: UISwitch)</span></span> &#123;</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\">//저장버튼</span></span><br><span class=\"line\">  <span class=\"meta\">@IBAction</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">saveButton</span><span class=\"params\">(<span class=\"number\">_</span> button : UIButton)</span></span> &#123;</span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"comment\">//셋업버튼</span></span><br><span class=\"line\">  <span class=\"meta\">@IBAction</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">setButton</span><span class=\"params\">(<span class=\"number\">_</span> button: UIButton)</span></span> &#123;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n<p>IBOutlet과 IBAction을 구분하여 연결지어 준다.</p>\n<p>이때, Switch는 아울렛과 액션 모두 연결해야한다. (아울렛일때와 액션일때의 기능 분리.)</p>\n<p>1-2. Key 값 설정.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">struct Key &#123;</span><br><span class=\"line\">  static let photo &#x3D; &quot;imageSwich&quot;</span><br><span class=\"line\">  static let photoLable &#x3D; &quot;Dog&quot;</span><br><span class=\"line\">  static let name &#x3D; &quot;name&quot;</span><br><span class=\"line\">  static let isOn &#x3D; &quot;inOn&quot;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>데이터를 불러오기 쉽게 Key값으로 변수를 설정한다.</p>\n<h2 id=\"2.-userdefault-선언과-switch값-설정하기.\">2. UserDefault 선언과 Switch값 설정하기.<a title=\"#2.-userdefault-선언과-switch값-설정하기.\" href=\"#2.-userdefault-선언과-switch값-설정하기.\"></a></h2>\n<p>2-1. userDefaults를 상수로 지정.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">let userDefaults &#x3D; UserDefaults.standard</span><br></pre></td></tr></table></figure>\n<p>userDefaults를 쓰기위해 UserDefaults.standard의 고정값이 필요하다. 자주 쓰기 위해 상수로 선언하여 활용한다.</p>\n<p>2-2. Switch 설정하기.</p>\n<p>먼저, viewDidLoad에 스위치에 대한 상시값(isOn)을 넣는다.</p>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> isOn = userDefaults.bool(forKey: <span class=\"type\">Key</span>.photo)</span><br><span class=\"line\">configureData(isOn: isOn)</span><br></pre></td></tr></table></figure>\n<ol>\n<li>스위치는 on/off 딱 두 타입 뿐이므로, true/false로 구분되기 때문에 userDefaults중에서도 Bool타입으로 지정한다. (userDefaults를 지정할때 해당하는 것에 맞는 타입으로 꼭 선택해야한다.)</li>\n<li>forKey는 Key값을 활용하여 넣는다.</li>\n<li>위의 configureData는 Switch가 on상태일 때의 값을 지정한 함수이름이다. (아래 코드 참고)</li>\n</ol>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">configureData</span><span class=\"params\">(isOn: Bool)</span></span> &#123;</span><br><span class=\"line\"><span class=\"keyword\">let</span> animal = isOn ? <span class=\"string\">\"dog\"</span> : <span class=\"string\">\"cat\"</span></span><br><span class=\"line\">animalPhoto.image = <span class=\"type\">UIImage</span>(named: animal)</span><br><span class=\"line\">animalLable.text = animal </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ol start=\"4\">\n<li>해당 스위치의 액션버튼에 userDefaults.set 적용하기</li>\n</ol>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@IBAction</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">isSwitch</span><span class=\"params\">(<span class=\"number\">_</span> sender: UISwitch)</span></span> &#123;</span><br><span class=\"line\">   </span><br><span class=\"line\">   configureData(isOn: sender.isOn)</span><br><span class=\"line\">   userDefaults.<span class=\"keyword\">set</span>(sender.isOn, forKey: <span class=\"type\">Key</span>.photo)</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n<p>set은 저장할때 사용한다.</p>\n<h2 id=\"3.-userdefault-적용.\">3. UserDefault 적용.<a title=\"#3.-userdefault-적용.\" href=\"#3.-userdefault-적용.\"></a></h2>\n<p>3-1. 저장하기 버튼에 UserDefault 적용.</p>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@IBAction</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">saveButton</span><span class=\"params\">(<span class=\"number\">_</span> button : UIButton)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> animal = animalSwitch.isOn ? <span class=\"string\">\"dog\"</span> : <span class=\"string\">\"cat\"</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">let</span> userDefaults = <span class=\"type\">UserDefaults</span>.standard</span><br><span class=\"line\">    <span class=\"comment\">//    userDefaults.set(animalLable.text, forKey: Key.photoLable) //아래의 photo와 중복되므로 생략해도됨. </span></span><br><span class=\"line\">    userDefaults.<span class=\"keyword\">set</span>(animal, forKey: <span class=\"type\">Key</span>.photo)</span><br><span class=\"line\">    userDefaults.<span class=\"keyword\">set</span>(animalSwitch.isOn, forKey: <span class=\"type\">Key</span>.isOn)</span><br><span class=\"line\">    userDefaults.<span class=\"keyword\">set</span>(animalTextField.text, forKey: <span class=\"type\">Key</span>.name)</span><br></pre></td></tr></table></figure>\n<ol>\n<li>IBAtion타입을 Any?에서 button으로 바꿔준다. (_ button : UIButton)</li>\n<li>animalSwitch.isOn ? “dog” : &quot;cat&quot;을 적용할 수 있는 변수 animal 선언. (func configureData 에서 써준건 해당 함수에서만 쓸 수 있으니까… 재선언)</li>\n<li>값에 맞게 모두 set을 적용한다.<br>\n이미지  = animal, (Key.photo) / 스위치 = animalSwitch.isOn(Key.isOn)/ 텍스트필드 = animalTextField.text(<a href=\"http://Key.name\" target=\"_blank\" rel=\"noopener\">Key.name</a>)</li>\n</ol>\n<p>3-2.  셋업 버튼에 UserDefault 적용.</p>\n <figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//셋업버튼</span></span><br><span class=\"line\"><span class=\"meta\">@IBAction</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">setButton</span><span class=\"params\">(<span class=\"number\">_</span> button: UIButton)</span></span> &#123;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"keyword\">let</span> userDefaults = <span class=\"type\">UserDefaults</span>.standard</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"keyword\">let</span> animal = animalSwitch.isOn ? <span class=\"string\">\"dog\"</span> : <span class=\"string\">\"cat\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> isPhoto = userDefaults.bool(forKey: <span class=\"type\">Key</span>.photo)</span><br><span class=\"line\">  <span class=\"keyword\">let</span> isanimalSwitch = userDefaults.bool(forKey: <span class=\"type\">Key</span>.isOn)</span><br><span class=\"line\">  <span class=\"keyword\">let</span> isPhotoLable = userDefaults.bool(forKey: <span class=\"type\">Key</span>.photoLable)</span><br><span class=\"line\">  <span class=\"keyword\">let</span> isAnimalTextfield = (userDefaults.object(forKey: <span class=\"type\">Key</span>.name) <span class=\"keyword\">as</span>? <span class=\"type\">Data</span>) ?? <span class=\"type\">Data</span>()</span><br><span class=\"line\">  </span><br><span class=\"line\">  animalPhoto.image = <span class=\"type\">UIImage</span>(named: animal)</span><br><span class=\"line\">  animalSwitch.setOn(isanimalSwitch, animated: <span class=\"literal\">true</span>)</span><br><span class=\"line\">  animalTextField.text = <span class=\"string\">\"\\(Key.name)\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ol>\n<li>셋업버튼에 대한 새로운 이름의 상수로 선언후 (Save한 값으로 되돌릴 수 있는 작업) 값 선언.</li>\n<li>타입을 지정할 수 없는 경우 object 선언하여 타입캐스팅이용함. (아래 참고)</li>\n</ol>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">let isAnimalTextfield &#x3D; (userDefaults.object(forKey: Key.name) as? Data) ?? Data()</span><br></pre></td></tr></table></figure>\n<p>위를 늘려쓰면 아래와 같은 느낌. (예시임,)</p>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> ob = userDefaults.object(forKey: <span class=\"type\">Key</span>.today)</span><br><span class=\"line\"><span class=\"keyword\">let</span> tempDate = ob <span class=\"keyword\">as</span>? <span class=\"type\">Date</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> tempTodat = tempDate ?? <span class=\"type\">Date</span>()</span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li>데이터에 해당하는 값 매칭. (고정값임((외우자))</li>\n</ol>\n<ul>\n<li>image는 UIimage</li>\n<li>Switch는 setOn</li>\n<li>Textfield는 text</li>\n<li>(해당없지만)Date는 setDate</li>\n</ul>\n<p><img src=\"/image/UserDefault-2.png\" alt=\"이미지\" class=\"φcx\"></p>\n<p>그러면 일단 여기까지는 완성이 된다.</p>\n<p>(이미지가 안뜬다면, Assets.xcassets에 image를 추가하였는지 확인!..  파일이름은 강아지: dog, 고양이: cat)</p>\n<p>Save도 정상적으로 되나 확인해볼까? 하는데, 키보드가 안내려가는 상황 발생!</p>\n<p>( cm + k 하면 내려가지만 언제나 앱이라는 가정하에 진행해야하니까…!!!)</p>\n<h2 id=\"4.-textfield-delegate\">4. Textfield Delegate<a title=\"#4.-textfield-delegate\" href=\"#4.-textfield-delegate\"></a></h2>\n<p>이번에는 딜리게이트를 이용하여 키보드에 대한 설정을 바꿔보도록 한다.</p>\n<p>딜리게이트는,</p>\n<p>‘(너가 기본적으로 제공해주는 것보다)내가 알아서 설정해서 쓸게,!’ 라는 걸 선언하는 것이다.</p>\n<p>4-1. Delegate 선언</p>\n <figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">animalDefaultViewController</span>: <span class=\"title\">UIViewController</span>, <span class=\"title\">UITextFieldDelegate</span> </span>&#123;</span><br></pre></td></tr></table></figure>\n<p>클래스에 UITextFieldDelegate를 추가한다.</p>\n<p>4-2. 셀프 선언</p>\n <figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">viewDidLoad</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\"><span class=\"keyword\">super</span>.viewDidLoad()</span><br><span class=\"line\"></span><br><span class=\"line\">animalTextField.delegate = <span class=\"keyword\">self</span></span><br></pre></td></tr></table></figure>\n<p>딜리게이트 설정이 필요한 해당 텍스트필드(animalTextField)와 delegate를 불러와 self를 viewDidLoad에 선언한다.</p>\n<p>4-2. return 시 키보드 닫음 설정.</p>\n <figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//리턴시 키보드 닫음</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">textFieldShouldReturn</span><span class=\"params\">(<span class=\"number\">_</span> textField: UITextField)</span></span> -&gt; <span class=\"type\">Bool</span> &#123;</span><br><span class=\"line\">  textField.resignFirstResponder()</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>크게 구현할 내용은 없고, 키보드에 [Return]을 누르게 되면 키보드가 닫힐 수 있도록 설정한다.</p>\n<p>그러면…</p>\n<p><img src=\"/image/UserDefault-3.png\" alt=\"이미지\" class=\"φcx\"></p>\n<p>텍스트필드를 입력하고 리턴을 누르면 키보드가 내려간다 !!</p>\n<p>이제 이것저것 설정하고 Save 버튼을 누르면? …!</p>\n<p>화면이 넘어가지 않는다…</p>\n<p>😸</p>\n<h2 id=\"5.화면전환\">5.화면전환<a title=\"#5.화면전환\" href=\"#5.화면전환\"></a></h2>\n<p>이미 스토리보드로 시작한거… segue로 화면전환을 할까? 하다가 역시 깔끔한게 좋아서 코드로 화면전환을 해보자 !!</p>\n<p>원래 코드로 시작하면, 끝까지 코드로만 하고,<br>\n스토리보드로 시작하면, 끝까지 스코리보드로만 하는 게 정석인 듯 싶지만…</p>\n<p>겸하는 것도 어찌됐든 가능하다.</p>\n<p>일단, Save버튼을 누른후 화면이 전환이 되는 구성이기 때문에 Save버튼으로 이동한다.</p>\n<p>5-1. 화면전환 메서드</p>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">animalTextField.text ?? <span class=\"string\">\"\"</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> story = <span class=\"type\">UIStoryboard</span>(name: <span class=\"string\">\"Main\"</span>, bundle: <span class=\"literal\">nil</span>)</span><br><span class=\"line\"><span class=\"keyword\">guard</span> <span class=\"keyword\">let</span> vc = story.instantiateViewController(identifier:  <span class=\"string\">\"animalViewController\"</span>) <span class=\"keyword\">as</span>? animalViewController <span class=\"keyword\">else</span> &#123;<span class=\"keyword\">return</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//값전달</span></span><br><span class=\"line\">vc.profileName = <span class=\"string\">\"\\(animalTextField.text!)\"</span></span><br><span class=\"line\">vc.animalName = <span class=\"string\">\"\\(animalLable.text!)\"</span></span><br><span class=\"line\">vc.profileImage = <span class=\"type\">UIImage</span>(named: animal)!</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//화면전환 스타일  </span></span><br><span class=\"line\">vc.modalPresentationStyle = .fullScreen</span><br><span class=\"line\">present(vc, animated: <span class=\"literal\">true</span>)</span><br></pre></td></tr></table></figure>\n<ol>\n<li>let story = UIStoryboard(name: “Main”, bundle: nil) 스토리 보드를 가져온다. &quot;Main&quot;은 거의 고정값이므로 외운다.(맨앞에 M은 대문자 필수!)</li>\n<li>vc에 스토리보드의 instantiateViewController을 불러온 후, identifier이름을 붙여넣는다. (identifier:  “animalViewController”). animalViewController은 두 번째 뷰컨 이름(목적지뷰)이다.</li>\n<li>as? animalViewController else {return} 역시 같은 이름으로 붙여넣는다. (identifier 이름은 보통 뷰컨트롤러의 이름과 동일하게 짓는다.)</li>\n<li>vc.에 화면전환시 값이 전달될 곳으로 매칭한다. 두번째 뷰에는 이미지-이미지, 텍스트필드 - 레이블1, 레이블 - 레이블2 로 총 3가지만 받아오면 된다. (이미지의 경우 UIImage(named:  )!의 형식임을 외우자.)</li>\n<li>vc.modalPresentationStyle = .fullScreen로 프리젠트 스타일을 설정하고, present(vc, animated: true)를 불러온다. (필수)</li>\n</ol>\n<p>그러면 ?</p>\n<p>화면은 전환이 되나, 데이터가 이동되지 않은 모습을 볼 수 있다</p>\n<p>Why?</p>\n<p>전달된 값을 받는 작업을 수행하지 않았기 때문에…</p>\n<p>5-2. 값 받기</p>\n<p>일단, 두 번째 뷰 컨트롤러(animalViewController)로 이동한다.</p>\n<p>이건 초간단하니 간단하게.</p>\n<ol>\n<li>아울렛 연결</li>\n</ol>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@IBOutlet</span> <span class=\"keyword\">var</span> profilePhoto: <span class=\"type\">UIImageView!</span></span><br><span class=\"line\"><span class=\"meta\">@IBOutlet</span> <span class=\"keyword\">var</span> profileLable: <span class=\"type\">UILabel!</span></span><br><span class=\"line\"><span class=\"meta\">@IBOutlet</span> <span class=\"keyword\">var</span> profileNameLable: <span class=\"type\">UILabel!</span></span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>변수 만들기</li>\n</ol>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> profileName = <span class=\"string\">\"\"</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> animalName = <span class=\"string\">\"\"</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> profileImage = <span class=\"type\">UIImage</span>()</span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li>viewDidLoad에 값 설정.</li>\n</ol>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">profileNameLable.text = profileName</span><br><span class=\"line\">   profileLable.text = animalName</span><br><span class=\"line\">   profilePhoto.image = profileImage</span><br></pre></td></tr></table></figure>\n<p>두번째 화면으로 넘어갔을 때 바로 값을 불러와야하기때문에 viewDidLoad에 값을 설정한다.<br>\n이 부분은. 5-1 의 4)부분을 참고하여 매칭하면 된다.</p>\n<p>그러고 빌드를 하면?</p>\n<p><img src=\"/image/UserDefault-4.png\" alt=\"이미지\" class=\"φcx\"></p>\n<p>이런 식으로 모두 값을 받아오는 모습을 볼 수 있다.</p>\n<p>사진 아래에 [&lt;&lt;정보변경하기]라는 버튼을 달아줬다. 이전화면으로 돌아가는 게 없어서 불편해서…</p>\n<ol start=\"4\">\n<li>화면 닫힘. (이전 화면으로)</li>\n</ol>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@IBAction</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">editButton</span><span class=\"params\">(<span class=\"number\">_</span> sender: <span class=\"keyword\">Any</span>)</span></span> &#123;</span><br><span class=\"line\">  </span><br><span class=\"line\">  dismiss(animated: <span class=\"literal\">true</span>) &#123;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>@IBAction 으로 이은후 dismiss만 해주면 끝.</p>\n<p>끝 !!</p>\n<p>앱을 종료하여도, 가장 마지막으로 값으로 Save한 시점에 계속 저장되어있는 모습을 볼 수 있다.</p>\n<p>그리고 setUp버튼은 Save한 값과 다르게 설정하다가 setUp을 누르면 Save한 값으로 돌아가는 용도이다.</p>\n<p>직접해서 확인해보면 될 듯… ㅎㅎ</p>\n<p>이것으로 마무리 한다!</p>\n<p>👐🏻 👾 👐🏻</p>\n<h3 id=\"[전체코드-]\">[전체코드 ]<a title=\"#[전체코드-]\" href=\"#[전체코드-]\"></a></h3>\n<p>전체 코드를 보며 흐름을 참고하자!</p>\n<ul>\n<li>첫번 째 뷰컨(animalDefaultViewController)</li>\n</ul>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> UIKit</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">animalDefaultViewController</span>: <span class=\"title\">UIViewController</span>, <span class=\"title\">UITextFieldDelegate</span> </span>&#123;</span><br><span class=\"line\">  </span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">Key</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">let</span> photo = <span class=\"string\">\"imageSwich\"</span></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">let</span> photoLable = <span class=\"string\">\"Dog\"</span></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">let</span> name = <span class=\"string\">\"name\"</span></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">let</span> isOn = <span class=\"string\">\"inOn\"</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"meta\">@IBOutlet</span> <span class=\"keyword\">var</span> animalPhoto: <span class=\"type\">UIImageView!</span> <span class=\"comment\">//imageSwich</span></span><br><span class=\"line\">  <span class=\"meta\">@IBOutlet</span> <span class=\"keyword\">var</span> animalLable: <span class=\"type\">UILabel!</span> <span class=\"comment\">//Dog</span></span><br><span class=\"line\">  <span class=\"meta\">@IBOutlet</span> <span class=\"keyword\">var</span> animalSwitch: <span class=\"type\">UISwitch!</span>  <span class=\"comment\">//스위치 아울렛</span></span><br><span class=\"line\">  <span class=\"meta\">@IBOutlet</span> <span class=\"keyword\">var</span> animalTextField: <span class=\"type\">UITextField!</span></span><br><span class=\"line\">  </span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"keyword\">let</span> userDefaults = <span class=\"type\">UserDefaults</span>.standard</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">viewDidLoad</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>.viewDidLoad()</span><br><span class=\"line\">    </span><br><span class=\"line\">    animalTextField.delegate = <span class=\"keyword\">self</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">let</span> isOn = userDefaults.bool(forKey: <span class=\"type\">Key</span>.photo)</span><br><span class=\"line\">    configureData(isOn: isOn)</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"meta\">@IBAction</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">isSwitch</span><span class=\"params\">(<span class=\"number\">_</span> sender: UISwitch)</span></span> &#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">let</span> userDefaults = <span class=\"type\">UserDefaults</span>.standard</span><br><span class=\"line\">    configureData(isOn: sender.isOn)</span><br><span class=\"line\">    userDefaults.<span class=\"keyword\">set</span>(sender.isOn, forKey: <span class=\"type\">Key</span>.photo)</span><br><span class=\"line\">    </span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">configureData</span><span class=\"params\">(isOn: Bool)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> animal = isOn ? <span class=\"string\">\"dog\"</span> : <span class=\"string\">\"cat\"</span></span><br><span class=\"line\">    animalPhoto.image = <span class=\"type\">UIImage</span>(named: animal)</span><br><span class=\"line\">    animalLable.text = animal</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"comment\">//저장버튼</span></span><br><span class=\"line\">  <span class=\"meta\">@IBAction</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">saveButton</span><span class=\"params\">(<span class=\"number\">_</span> button : UIButton)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> animal = animalSwitch.isOn ? <span class=\"string\">\"dog\"</span> : <span class=\"string\">\"cat\"</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">let</span> userDefaults = <span class=\"type\">UserDefaults</span>.standard</span><br><span class=\"line\"><span class=\"comment\">//    userDefaults.set(animalLable.text, forKey: Key.photoLable)</span></span><br><span class=\"line\">    userDefaults.<span class=\"keyword\">set</span>(animal, forKey: <span class=\"type\">Key</span>.photo)</span><br><span class=\"line\">    userDefaults.<span class=\"keyword\">set</span>(animalSwitch.isOn, forKey: <span class=\"type\">Key</span>.isOn)</span><br><span class=\"line\">    userDefaults.<span class=\"keyword\">set</span>(animalTextField.text, forKey: <span class=\"type\">Key</span>.name)</span><br><span class=\"line\"> </span><br><span class=\"line\">    animalTextField.text ?? <span class=\"string\">\"\"</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> story = <span class=\"type\">UIStoryboard</span>(name: <span class=\"string\">\"Main\"</span>, bundle: <span class=\"literal\">nil</span>)</span><br><span class=\"line\">    <span class=\"keyword\">guard</span> <span class=\"keyword\">let</span> vc = story.instantiateViewController(identifier:  <span class=\"string\">\"animalViewController\"</span>) <span class=\"keyword\">as</span>? animalViewController <span class=\"keyword\">else</span> &#123;<span class=\"keyword\">return</span>&#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    vc.profileName = <span class=\"string\">\"\\(animalTextField.text!)\"</span></span><br><span class=\"line\">    vc.animalName = <span class=\"string\">\"\\(animalLable.text!)\"</span></span><br><span class=\"line\">    vc.profileImage = <span class=\"type\">UIImage</span>(named: animal)!</span><br><span class=\"line\"></span><br><span class=\"line\">      </span><br><span class=\"line\">    vc.modalPresentationStyle = .fullScreen</span><br><span class=\"line\">    present(vc, animated: <span class=\"literal\">true</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"comment\">//리턴시 키보드 닫음</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">textFieldShouldReturn</span><span class=\"params\">(<span class=\"number\">_</span> textField: UITextField)</span></span> -&gt; <span class=\"type\">Bool</span> &#123;</span><br><span class=\"line\">    textField.resignFirstResponder()</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"comment\">//셋업버튼</span></span><br><span class=\"line\">  <span class=\"meta\">@IBAction</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">setButton</span><span class=\"params\">(<span class=\"number\">_</span> button: UIButton)</span></span> &#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">let</span> userDefaults = <span class=\"type\">UserDefaults</span>.standard</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">let</span> animal = animalSwitch.isOn ? <span class=\"string\">\"dog\"</span> : <span class=\"string\">\"cat\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">let</span> isPhoto = userDefaults.bool(forKey: <span class=\"type\">Key</span>.photo)</span><br><span class=\"line\">    <span class=\"keyword\">let</span> isanimalSwitch = userDefaults.bool(forKey: <span class=\"type\">Key</span>.isOn)</span><br><span class=\"line\">    <span class=\"keyword\">let</span> isPhotoLable = userDefaults.bool(forKey: <span class=\"type\">Key</span>.photoLable)</span><br><span class=\"line\">    <span class=\"keyword\">let</span> isAnimalTextfield = (userDefaults.object(forKey: <span class=\"type\">Key</span>.name) <span class=\"keyword\">as</span>? <span class=\"type\">Data</span>) ?? <span class=\"type\">Data</span>()</span><br><span class=\"line\">    </span><br><span class=\"line\">    animalPhoto.image = <span class=\"type\">UIImage</span>(named: animal)</span><br><span class=\"line\">    animalSwitch.setOn(isanimalSwitch, animated: <span class=\"literal\">true</span>)</span><br><span class=\"line\">    animalTextField.text = <span class=\"string\">\"\\(Key.name)\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>두 번째 뷰컨(animalViewController)</li>\n</ul>\n<figure class=\"highlight swift\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> UIKit</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">animalViewController</span>: <span class=\"title\">UIViewController</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  </span><br><span class=\"line\">   <span class=\"keyword\">var</span> profileName = <span class=\"string\">\"\"</span></span><br><span class=\"line\">   <span class=\"keyword\">var</span> animalName = <span class=\"string\">\"\"</span></span><br><span class=\"line\">   <span class=\"keyword\">var</span> profileImage = <span class=\"type\">UIImage</span>()</span><br><span class=\"line\">  </span><br><span class=\"line\">  </span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">viewDidLoad</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.viewDidLoad()</span><br><span class=\"line\"></span><br><span class=\"line\">    profileNameLable.text = profileName</span><br><span class=\"line\">    profileLable.text = animalName</span><br><span class=\"line\">    profilePhoto.image = profileImage</span><br><span class=\"line\">      </span><br><span class=\"line\">      </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"meta\">@IBOutlet</span> <span class=\"keyword\">var</span> profilePhoto: <span class=\"type\">UIImageView!</span></span><br><span class=\"line\">  <span class=\"meta\">@IBOutlet</span> <span class=\"keyword\">var</span> profileLable: <span class=\"type\">UILabel!</span></span><br><span class=\"line\">  <span class=\"meta\">@IBOutlet</span> <span class=\"keyword\">var</span> profileNameLable: <span class=\"type\">UILabel!</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@IBAction</span> <span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">editButton</span><span class=\"params\">(<span class=\"number\">_</span> sender: <span class=\"keyword\">Any</span>)</span></span> &#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    dismiss(animated: <span class=\"literal\">true</span>) &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","prev":{"title":"[Swift]스토리보드에서 AutoLayout이해하기","link":"2020/05/15/Swift-스토리보드에서-AytoLayoutㅇ이해하기"},"next":{"title":"[라이브러리]SideMenu사용하기","link":"2020/05/12/라이브러리-SiedMenu사용법"},"plink":"https://Qussk.github.io/2020/05/13/Swift-UserDefault로-데이터-저장하기/","toc":[{"id":"userdefault-이해하기","title":"UserDefault 이해하기","index":"1"},{"id":"userdefault-활용하기","title":"UserDefault 활용하기","index":"2","children":[{"id":"구현-목표","title":"구현 목표","index":"2.1"}]},{"id":"1.-ui짜기,-구조설정","title":"1. UI짜기, 구조설정","index":"3"},{"id":"2.-userdefault-선언과-switch값-설정하기.","title":"2. UserDefault 선언과 Switch값 설정하기.","index":"4"},{"id":"3.-userdefault-적용.","title":"3. UserDefault 적용.","index":"5"},{"id":"4.-textfield-delegate","title":"4. Textfield Delegate","index":"6"},{"id":"5.화면전환","title":"5.화면전환","index":"7","children":[{"id":"[전체코드-]","title":"[전체코드 ]","index":"7.1"}]}]}